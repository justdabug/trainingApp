{"version":3,"sources":["../../src/addon/mod/scorm/pages/player/player.ngfactory.js","../../src/addon/mod/scorm/classes/data-model-12.ts","../../src/addon/mod/scorm/pages/player/player.ts","../../src/addon/mod/scorm/pages/player/player.module.ts","../../src/addon/mod/scorm/pages/player/player.module.ngfactory.js"],"names":["View_AddonModScormPlayerPage_1","_l","core","_v","en","$event","ad","component","openToc","button_ngfactory","button_button","config","translate_pipe","translate_service","icon","name","_ck","transform","_hidden","View_AddonModScormPlayerPage_2","spinner_ngfactory","spinner","_paused","View_AddonModScormPlayerPage_3","iframe_ngfactory","iframe","logger","utils_iframe","dom","platform_browser","nav_controller","url","utils","split_view","src","iframeWidth","iframeHeight","_co","scorm","popup","width","undefined","height","View_AddonModScormPlayerPage_4","errorMessage","View_AddonModScormPlayerPage_0","toolbar_header","view_controller","navbar_ngfactory","navbar","app","back_button","platform","events","toolbar_title_ngfactory","toolbar_title","toolbar","format_text","sites","utils_text","filepool","providers_app","providers_helper","content","filter","filter_providers_helper","delegate","text","contextLevel","contextInstanceId","courseId","toolbar_item","_buttons","common","ngIf","content_ngfactory","dom_controller","keyboard","loading_ngfactory","loading","hideUntil","loadSco","navigation_bar_ngfactory","navigation_bar","previous","next","action","title","coursemodule","course","showToc","loadingToc","toc","length","loaded","previousSco","nextSco","_sbPadding","statusbarPadding","_hasRefresher","data_model_12_AddonModScormDataModel12","AddonModScormDataModel12","eventsProvider","scormProvider","siteId","scoId","attempt","userData","mode","offline","this","CMI_STRING_256","CMI_STRING_4096","CMI_TIME","CMI_TIMESPAN","CMI_INTEGER","CMI_SINTEGER","CMI_DECIMAL","CMI_IDENTIFIER","CMI_FEEDBACK","CMI_INDEX","CMI_STATUS","CMI_STATUS_2","CMI_EXIT","CMI_TYPE","CMI_RESULT","NAV_EVENT","CMI_CHILDREN","CORE_CHILDREN","SCORE_CHILDREN","COMMENTS_CHILDREN","OBJECTIVES_CHILDREN","CORRECT_RESPONSES_CHILDREN","STUDENT_DATA_CHILDREN","STUDENT_PREFERENCE_CHILDREN","INTERACTIONS_CHILDREN","SCORE_RANGE","AUDIO_RANGE","SPEED_RANGE","WEIGHTING_RANGE","TEXT_RANGE","ERROR_STRINGS","0","101","201","202","203","301","401","402","403","404","405","currentUserData","def","defExtra","dataModel","initialized","providers_scorm","MODENORMAL","init","prototype","addTime","first","second","sFirst","split","sSecond","cFirst","cSecond","change","firstCents","parseInt","secondCents","cents","Math","floor","toString","secs","mins","hours","cloneObj","obj","temp","constructor","key","collectData","data","element","substr","expression","RegExp","elementModel","String","replace","mod","el","value","getEl","defaultvalue","push","sco","defaultdata","userdata","cmi._children","writeerror","cmi._version","cmi.core._children","cmi.core.student_id","cmi.core.student_name","cmi.core.lesson_location","format","cmi.core.credit","cmi.core.lesson_status","cmi.core.entry","cmi.core.score._children","cmi.core.score.raw","range","cmi.core.score.max","cmi.core.score.min","cmi.core.total_time","cmi.core.lesson_mode","cmi.core.exit","readerror","cmi.core.session_time","cmi.suspend_data","cmi.launch_data","cmi.comments","cmi.evaluation.comments._count","cmi.evaluation.comments._children","cmi.evaluation.comments.n.content","pattern","cmi.evaluation.comments.n.location","cmi.evaluation.comments.n.time","cmi.comments_from_lms","cmi.objectives._children","cmi.objectives._count","cmi.objectives.n.id","cmi.objectives.n.score._children","cmi.objectives.n.score.raw","cmi.objectives.n.score.min","cmi.objectives.n.score.max","cmi.objectives.n.status","cmi.student_data._children","cmi.student_data.mastery_score","cmi.student_data.max_time_allowed","cmi.student_data.time_limit_action","cmi.student_preference._children","cmi.student_preference.audio","cmi.student_preference.language","cmi.student_preference.speed","cmi.student_preference.text","cmi.interactions._children","cmi.interactions._count","cmi.interactions.n.id","cmi.interactions.n.objectives._count","cmi.interactions.n.objectives.n.id","cmi.interactions.n.time","cmi.interactions.n.type","cmi.interactions.n.correct_responses._count","cmi.interactions.n.correct_responses.n.pattern","cmi.interactions.n.weighting","cmi.interactions.n.student_response","cmi.interactions.n.result","cmi.interactions.n.latency","nav.event","match","counterElement","currentCounterIndex","elementDotFormat","currentN","indexOf","LMSCommit","param","timeout","clearTimeout","errorCode","result","storeData","triggerEvent","UPDATE_TOC_EVENT","LMSFinish","LAUNCH_NEXT_SCO_EVENT","LAUNCH_PREV_SCO_EVENT","auto","LMSGetDiagnostic","LMSGetErrorString","LMSGetLastError","LMSGetValue","parentModel","LMSInitialize","LMSSetValue","setEl","elementIndexes","subElement","i","elementIndex","count","concat","autocommit","setTimeout","bind","ranges","setOffline","storeTotalTime","tracks","parseFloat","MODEBROWSE","totalTime","success","saveTracksSync","GO_OFFLINE_EVENT","trigger","scormId","id","player_AddonModScormPlayerPage","AddonModScormPlayerPage","navParams","modalCtrl","sitesProvider","syncProvider","domUtils","timeUtils","scormHelper","scormSyncProvider","tabs","get","newAttempt","organizationId","initialScoId","getCurrentSiteId","blockOperation","COMPONENT","ngOnInit","_this","displayTocInPlayer","changeVisibility","fetchData","then","currentSco","setStartTime","Promise","resolve","catch","error","showErrorModalDefault","finally","tocObserver","on","refreshToc","launchNextObserver","launchPrevObserver","goOfflineObserver","convertAttemptToOffline","calculateNextAndPreviousSco","getPreviousScoFromToc","getNextScoFromToc","determineAttemptAndMode","attemptsData","determineAttemptToContinue","number","lastAttempt","attemptToContinue","isAttemptIncomplete","incomplete","createOfflineAttempt","online","getScormUserData","waitForSync","getAttemptCount","promises","fetchToc","getAccessInformation","accessInfo","all","getOrganizationToc","formatTocToArray","forEach","image","getScoStatusIcon","launch","getScoFromToc","getFirstSco","ionViewWillUnload","window","API","getScoSrc","scormtype","tracks_1","saveTracks","logLaunchSco","event","modal","create","selected","moduleId","cssClass","showBackdrop","enableBackdropDismiss","enterAnimation","leaveAnimation","onDidDismiss","present","ev","invalidateAllScormData","timestamp","ngOnDestroy","off","unblockOperation","__decorate","Object","selector","templateUrl","ionic_angular","sync","time","helper","scorm_sync","ion_tabs","player_module_AddonModScormPlayerPageModule","AddonModScormPlayerPageModule","player_module___decorate","declarations","imports","components_module","directives_module","forChild","_ngx_translate_core","RenderType_AddonModScormPlayerPage","encapsulation","styles","AddonModScormPlayerPageNgFactory","View_AddonModScormPlayerPage_Host_0","nav_params","modal_controller","__webpack_require__","d","__webpack_exports__","AddonModScormPlayerPageModuleNgFactory","action_sheet_component_ngfactory","alert_component_ngfactory","app_root_ngfactory","loading_component_ngfactory","modal_component_ngfactory","picker_component_ngfactory","popover_component_ngfactory","select_popover_component_ngfactory","toast_component_ngfactory","context_menu_popover_ngfactory","course_picker_menu_popover_ngfactory","recaptchamodal_ngfactory","bs_tooltip_ngfactory","esm5_forms","translate_loader","translate_compiler","translate_parser","missing_translation_handler","translate_store","ionic_angular_module","pipes_module","module_loader"],"mappings":"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","sourcesContent":["/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../../../node_modules/ionic-angular/components/button/button.ngfactory\";\nimport * as i2 from \"ionic-angular/components/button/button\";\nimport * as i3 from \"ionic-angular/config/config\";\nimport * as i4 from \"@ngx-translate/core/src/translate.pipe\";\nimport * as i5 from \"@ngx-translate/core/src/translate.service\";\nimport * as i6 from \"ionic-angular/components/icon/icon\";\nimport * as i7 from \"../../../../../../node_modules/ionic-angular/components/spinner/spinner.ngfactory\";\nimport * as i8 from \"ionic-angular/components/spinner/spinner\";\nimport * as i9 from \"../../../../../components/iframe/iframe.ngfactory\";\nimport * as i10 from \"../../../../../components/iframe/iframe\";\nimport * as i11 from \"../../../../../providers/logger\";\nimport * as i12 from \"../../../../../providers/utils/iframe\";\nimport * as i13 from \"../../../../../providers/utils/dom\";\nimport * as i14 from \"@angular/platform-browser\";\nimport * as i15 from \"ionic-angular/navigation/nav-controller\";\nimport * as i16 from \"../../../../../providers/utils/url\";\nimport * as i17 from \"../../../../../providers/utils/utils\";\nimport * as i18 from \"../../../../../components/split-view/split-view\";\nimport * as i19 from \"ionic-angular/components/toolbar/toolbar-header\";\nimport * as i20 from \"ionic-angular/navigation/view-controller\";\nimport * as i21 from \"../../../../../../node_modules/ionic-angular/components/toolbar/navbar.ngfactory\";\nimport * as i22 from \"ionic-angular/components/toolbar/navbar\";\nimport * as i23 from \"ionic-angular/components/app/app\";\nimport * as i24 from \"../../../../../directives/back-button\";\nimport * as i25 from \"ionic-angular/platform/platform\";\nimport * as i26 from \"../../../../../providers/events\";\nimport * as i27 from \"../../../../../../node_modules/ionic-angular/components/toolbar/toolbar-title.ngfactory\";\nimport * as i28 from \"ionic-angular/components/toolbar/toolbar-title\";\nimport * as i29 from \"ionic-angular/components/toolbar/toolbar\";\nimport * as i30 from \"../../../../../directives/format-text\";\nimport * as i31 from \"../../../../../providers/sites\";\nimport * as i32 from \"../../../../../providers/utils/text\";\nimport * as i33 from \"../../../../../providers/filepool\";\nimport * as i34 from \"../../../../../providers/app\";\nimport * as i35 from \"../../../../../core/contentlinks/providers/helper\";\nimport * as i36 from \"ionic-angular/components/content/content\";\nimport * as i37 from \"../../../../../core/filter/providers/filter\";\nimport * as i38 from \"../../../../../core/filter/providers/helper\";\nimport * as i39 from \"../../../../../core/filter/providers/delegate\";\nimport * as i40 from \"ionic-angular/components/toolbar/toolbar-item\";\nimport * as i41 from \"@angular/common\";\nimport * as i42 from \"../../../../../../node_modules/ionic-angular/components/content/content.ngfactory\";\nimport * as i43 from \"ionic-angular/platform/dom-controller\";\nimport * as i44 from \"ionic-angular/platform/keyboard\";\nimport * as i45 from \"../../../../../components/loading/loading.ngfactory\";\nimport * as i46 from \"../../../../../components/loading/loading\";\nimport * as i47 from \"../../../../../components/navigation-bar/navigation-bar.ngfactory\";\nimport * as i48 from \"../../../../../components/navigation-bar/navigation-bar\";\nimport * as i49 from \"./player\";\nimport * as i50 from \"ionic-angular/navigation/nav-params\";\nimport * as i51 from \"ionic-angular/components/modal/modal-controller\";\nimport * as i52 from \"../../../../../providers/sync\";\nimport * as i53 from \"../../../../../providers/utils/time\";\nimport * as i54 from \"../../providers/scorm\";\nimport * as i55 from \"../../providers/helper\";\nimport * as i56 from \"../../providers/scorm-sync\";\nimport * as i57 from \"../../../../../components/ion-tabs/ion-tabs\";\nvar styles_AddonModScormPlayerPage = [];\nvar RenderType_AddonModScormPlayerPage = i0.ɵcrt({ encapsulation: 2, styles: styles_AddonModScormPlayerPage, data: {} });\nexport { RenderType_AddonModScormPlayerPage as RenderType_AddonModScormPlayerPage };\nfunction View_AddonModScormPlayerPage_1(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 6, \"button\", [[\"aria-haspopup\", \"true\"], [\"icon-only\", \"\"], [\"ion-button\", \"\"]], [[1, \"aria-label\", 0]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\n        var pd_0 = (_co.openToc($event) !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, i1.View_Button_0, i1.RenderType_Button)), i0.ɵdid(1, 1097728, [[1, 4]], 0, i2.Button, [[8, \"\"], i3.Config, i0.ElementRef, i0.Renderer], null, null), i0.ɵpid(131072, i4.TranslatePipe, [i5.TranslateService, i0.ChangeDetectorRef]), (_l()(), i0.ɵted(-1, 0, [\"\\n                \"])), (_l()(), i0.ɵeld(4, 0, null, 0, 1, \"ion-icon\", [[\"name\", \"bookmark\"], [\"role\", \"img\"]], [[2, \"hide\", null]], null, null, null, null)), i0.ɵdid(5, 147456, null, 0, i6.Icon, [i3.Config, i0.ElementRef, i0.Renderer], { name: [0, \"name\"] }, null), (_l()(), i0.ɵted(-1, 0, [\"\\n            \"]))], function (_ck, _v) { var currVal_2 = \"bookmark\"; _ck(_v, 5, 0, currVal_2); }, function (_ck, _v) { var currVal_0 = i0.ɵunv(_v, 0, 0, i0.ɵnov(_v, 2).transform(\"addon.mod_scorm.toc\")); _ck(_v, 0, 0, currVal_0); var currVal_1 = i0.ɵnov(_v, 5)._hidden; _ck(_v, 4, 0, currVal_1); }); }\nfunction View_AddonModScormPlayerPage_2(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"ion-spinner\", [], [[2, \"spinner-paused\", null]], null, null, i7.View_Spinner_0, i7.RenderType_Spinner)), i0.ɵdid(1, 114688, null, 0, i8.Spinner, [i3.Config, i0.ElementRef, i0.Renderer], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, function (_ck, _v) { var currVal_0 = i0.ɵnov(_v, 1)._paused; _ck(_v, 0, 0, currVal_0); }); }\nfunction View_AddonModScormPlayerPage_3(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"core-iframe\", [], null, null, null, i9.View_CoreIframeComponent_0, i9.RenderType_CoreIframeComponent)), i0.ɵdid(1, 638976, null, 0, i10.CoreIframeComponent, [i11.CoreLoggerProvider, i12.CoreIframeUtilsProvider, i13.CoreDomUtilsProvider, i14.DomSanitizer, i15.NavController, i16.CoreUrlUtilsProvider, i17.CoreUtilsProvider, [2, i18.CoreSplitViewComponent]], { src: [0, \"src\"], iframeWidth: [1, \"iframeWidth\"], iframeHeight: [2, \"iframeHeight\"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.src; var currVal_1 = (_co.scorm.popup ? _co.scorm.width : undefined); var currVal_2 = (_co.scorm.popup ? _co.scorm.height : undefined); _ck(_v, 1, 0, currVal_0, currVal_1, currVal_2); }, null); }\nfunction View_AddonModScormPlayerPage_4(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 2, \"p\", [], null, null, null, null, null)), (_l()(), i0.ɵted(1, null, [\"\", \"\"])), i0.ɵpid(131072, i4.TranslatePipe, [i5.TranslateService, i0.ChangeDetectorRef])], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = i0.ɵunv(_v, 1, 0, i0.ɵnov(_v, 2).transform(_co.errorMessage)); _ck(_v, 1, 0, currVal_0); }); }\nexport function View_AddonModScormPlayerPage_0(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 23, \"ion-header\", [], null, null, null, null, null)), i0.ɵdid(1, 16384, null, 0, i19.Header, [i3.Config, i0.ElementRef, i0.Renderer, [2, i20.ViewController]], null, null), (_l()(), i0.ɵted(-1, null, [\"\\n    \"])), (_l()(), i0.ɵeld(3, 0, null, null, 19, \"ion-navbar\", [[\"class\", \"toolbar\"], [\"core-back-button\", \"\"]], [[8, \"hidden\", 0], [2, \"statusbar-padding\", null]], null, null, i21.View_Navbar_0, i21.RenderType_Navbar)), i0.ɵdid(4, 49152, null, 0, i22.Navbar, [i23.App, [2, i20.ViewController], [2, i15.NavController], i3.Config, i0.ElementRef, i0.Renderer], null, null), i0.ɵdid(5, 212992, null, 0, i24.CoreBackButtonDirective, [i22.Navbar, i25.Platform, i5.TranslateService, i26.CoreEventsProvider], null, null), (_l()(), i0.ɵted(-1, 3, [\"\\n        \"])), (_l()(), i0.ɵeld(7, 0, null, 3, 3, \"ion-title\", [], null, null, null, i27.View_ToolbarTitle_0, i27.RenderType_ToolbarTitle)), i0.ɵdid(8, 49152, null, 0, i28.ToolbarTitle, [i3.Config, i0.ElementRef, i0.Renderer, [2, i29.Toolbar], [2, i22.Navbar]], null, null), (_l()(), i0.ɵeld(9, 16777216, null, 0, 1, \"core-format-text\", [[\"contextLevel\", \"module\"]], null, null, null, null, null)), i0.ɵdid(10, 540672, null, 0, i30.CoreFormatTextDirective, [i0.ElementRef, i31.CoreSitesProvider, i13.CoreDomUtilsProvider, i32.CoreTextUtilsProvider, i5.TranslateService, i25.Platform, i17.CoreUtilsProvider, i16.CoreUrlUtilsProvider, i11.CoreLoggerProvider, i33.CoreFilepoolProvider, i34.CoreAppProvider, i35.CoreContentLinksHelperProvider, [2, i15.NavController], [2, i36.Content], [2, i18.CoreSplitViewComponent], i12.CoreIframeUtilsProvider, i26.CoreEventsProvider, i37.CoreFilterProvider, i38.CoreFilterHelperProvider, i39.CoreFilterDelegate, i0.ViewContainerRef], { text: [0, \"text\"], contextLevel: [1, \"contextLevel\"], contextInstanceId: [2, \"contextInstanceId\"], courseId: [3, \"courseId\"] }, null), (_l()(), i0.ɵted(-1, 3, [\"\\n\\n        \"])), (_l()(), i0.ɵeld(12, 0, null, 2, 9, \"ion-buttons\", [[\"end\", \"\"]], null, null, null, null, null)), i0.ɵdid(13, 16384, null, 1, i40.ToolbarItem, [i3.Config, i0.ElementRef, i0.Renderer, [2, i29.Toolbar], [2, i22.Navbar]], null, null), i0.ɵqud(603979776, 1, { _buttons: 1 }), (_l()(), i0.ɵted(-1, null, [\"\\n            \"])), (_l()(), i0.ɵand(16777216, null, null, 1, null, View_AddonModScormPlayerPage_1)), i0.ɵdid(17, 16384, null, 0, i41.NgIf, [i0.ViewContainerRef, i0.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i0.ɵted(-1, null, [\"\\n            \"])), (_l()(), i0.ɵand(16777216, null, null, 1, null, View_AddonModScormPlayerPage_2)), i0.ɵdid(20, 16384, null, 0, i41.NgIf, [i0.ViewContainerRef, i0.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i0.ɵted(-1, null, [\"\\n        \"])), (_l()(), i0.ɵted(-1, 3, [\"\\n    \"])), (_l()(), i0.ɵted(-1, null, [\"\\n\"])), (_l()(), i0.ɵted(-1, null, [\"\\n\"])), (_l()(), i0.ɵeld(25, 0, null, null, 15, \"ion-content\", [], [[2, \"statusbar-padding\", null], [2, \"has-refresher\", null]], null, null, i42.View_Content_0, i42.RenderType_Content)), i0.ɵdid(26, 4374528, null, 0, i36.Content, [i3.Config, i25.Platform, i43.DomController, i0.ElementRef, i0.Renderer, i23.App, i44.Keyboard, i0.NgZone, [2, i20.ViewController], [2, i15.NavController]], null, null), (_l()(), i0.ɵted(-1, 1, [\"\\n    \"])), (_l()(), i0.ɵeld(28, 0, null, 1, 11, \"core-loading\", [], null, null, null, i45.View_CoreLoadingComponent_0, i45.RenderType_CoreLoadingComponent)), i0.ɵdid(29, 638976, null, 0, i46.CoreLoadingComponent, [i5.TranslateService, i0.ElementRef, i26.CoreEventsProvider, i17.CoreUtilsProvider], { hideUntil: [0, \"hideUntil\"] }, null), (_l()(), i0.ɵted(-1, 0, [\"\\n        \"])), (_l()(), i0.ɵeld(31, 0, null, 0, 1, \"core-navigation-bar\", [], null, [[null, \"action\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"action\" === en)) {\n        var pd_0 = (_co.loadSco($event) !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, i47.View_CoreNavigationBarComponent_0, i47.RenderType_CoreNavigationBarComponent)), i0.ɵdid(32, 49152, null, 0, i48.CoreNavigationBarComponent, [i32.CoreTextUtilsProvider], { previous: [0, \"previous\"], next: [1, \"next\"] }, { action: \"action\" }), (_l()(), i0.ɵted(-1, 0, [\"\\n        \"])), (_l()(), i0.ɵand(16777216, null, 0, 1, null, View_AddonModScormPlayerPage_3)), i0.ɵdid(35, 16384, null, 0, i41.NgIf, [i0.ViewContainerRef, i0.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i0.ɵted(-1, 0, [\"\\n        \"])), (_l()(), i0.ɵand(16777216, null, 0, 1, null, View_AddonModScormPlayerPage_4)), i0.ɵdid(38, 16384, null, 0, i41.NgIf, [i0.ViewContainerRef, i0.TemplateRef], { ngIf: [0, \"ngIf\"] }, null), (_l()(), i0.ɵted(-1, 0, [\"\\n    \"])), (_l()(), i0.ɵted(-1, 1, [\"\\n\"])), (_l()(), i0.ɵted(-1, null, [\"\\n\"]))], function (_ck, _v) { var _co = _v.component; _ck(_v, 5, 0); var currVal_2 = _co.title; var currVal_3 = \"module\"; var currVal_4 = _co.scorm.coursemodule; var currVal_5 = _co.scorm.course; _ck(_v, 10, 0, currVal_2, currVal_3, currVal_4, currVal_5); var currVal_6 = (((_co.showToc && !_co.loadingToc) && _co.toc) && _co.toc.length); _ck(_v, 17, 0, currVal_6); var currVal_7 = (_co.showToc && _co.loadingToc); _ck(_v, 20, 0, currVal_7); var currVal_10 = _co.loaded; _ck(_v, 29, 0, currVal_10); var currVal_11 = _co.previousSco; var currVal_12 = _co.nextSco; _ck(_v, 32, 0, currVal_11, currVal_12); var currVal_13 = (_co.loaded && _co.src); _ck(_v, 35, 0, currVal_13); var currVal_14 = (!_co.src && _co.errorMessage); _ck(_v, 38, 0, currVal_14); }, function (_ck, _v) { var currVal_0 = i0.ɵnov(_v, 4)._hidden; var currVal_1 = i0.ɵnov(_v, 4)._sbPadding; _ck(_v, 3, 0, currVal_0, currVal_1); var currVal_8 = i0.ɵnov(_v, 26).statusbarPadding; var currVal_9 = i0.ɵnov(_v, 26)._hasRefresher; _ck(_v, 25, 0, currVal_8, currVal_9); }); }\nexport function View_AddonModScormPlayerPage_Host_0(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"page-addon-mod-scorm-player\", [], null, null, null, View_AddonModScormPlayerPage_0, RenderType_AddonModScormPlayerPage)), i0.ɵdid(1, 245760, null, 0, i49.AddonModScormPlayerPage, [i50.NavParams, i51.ModalController, i26.CoreEventsProvider, i31.CoreSitesProvider, i52.CoreSyncProvider, i13.CoreDomUtilsProvider, i53.CoreTimeUtilsProvider, i54.AddonModScormProvider, i55.AddonModScormHelperProvider, i56.AddonModScormSyncProvider, i57.CoreIonTabsComponent], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\nvar AddonModScormPlayerPageNgFactory = i0.ɵccf(\"page-addon-mod-scorm-player\", i49.AddonModScormPlayerPage, View_AddonModScormPlayerPage_Host_0, {}, {}, []);\nexport { AddonModScormPlayerPageNgFactory as AddonModScormPlayerPageNgFactory };\n//# sourceMappingURL=player.ngfactory.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/addon/mod/scorm/pages/player/player.ngfactory.js\n// module id = null\n// module chunks = ","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreEventsProvider } from '@providers/events';\nimport { AddonModScormProvider } from '../providers/scorm';\n\n/**\n * SCORM data model implementation for version 1.2.\n */\nexport class AddonModScormDataModel12 {\n\n    // Standard Data Type Definition.\n    protected CMI_STRING_256 = '^[\\\\u0000-\\\\uFFFF]{0,255}$';\n    protected CMI_STRING_4096 = '^[\\\\u0000-\\\\uFFFF]{0,4096}$';\n    protected CMI_TIME = '^([0-2]{1}[0-9]{1}):([0-5]{1}[0-9]{1}):([0-5]{1}[0-9]{1})(\\.[0-9]{1,2})?$';\n    protected CMI_TIMESPAN = '^([0-9]{2,4}):([0-9]{2}):([0-9]{2})(\\.[0-9]{1,2})?$';\n    protected CMI_INTEGER = '^\\\\d+$';\n    protected CMI_SINTEGER = '^-?([0-9]+)$';\n    protected CMI_DECIMAL = '^-?([0-9]{0,3})(\\.[0-9]*)?$';\n    protected CMI_IDENTIFIER = '^[\\\\u0021-\\\\u007E]{0,255}$';\n    protected CMI_FEEDBACK = this.CMI_STRING_256; // This must be redefined.\n    protected CMI_INDEX = '[._](\\\\d+).';\n\n    // Vocabulary Data Type Definition.\n    protected CMI_STATUS = '^passed$|^completed$|^failed$|^incomplete$|^browsed$';\n    protected CMI_STATUS_2 = '^passed$|^completed$|^failed$|^incomplete$|^browsed$|^not attempted$';\n    protected CMI_EXIT = '^time-out$|^suspend$|^logout$|^$';\n    protected CMI_TYPE = '^true-false$|^choice$|^fill-in$|^matching$|^performance$|^sequencing$|^likert$|^numeric$';\n    protected CMI_RESULT = '^correct$|^wrong$|^unanticipated$|^neutral$|^([0-9]{0,3})?(\\.[0-9]*)?$';\n    protected NAV_EVENT = '^previous$|^continue$';\n\n    // Children lists.\n    protected CMI_CHILDREN = 'core,suspend_data,launch_data,comments,objectives,student_data,student_preference,interactions';\n    protected CORE_CHILDREN = 'student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,' +\n            'exit,session_time';\n    protected SCORE_CHILDREN = 'raw,min,max';\n    protected COMMENTS_CHILDREN = 'content,location,time';\n    protected OBJECTIVES_CHILDREN = 'id,score,status';\n    protected CORRECT_RESPONSES_CHILDREN = 'pattern';\n    protected STUDENT_DATA_CHILDREN = 'mastery_score,max_time_allowed,time_limit_action';\n    protected STUDENT_PREFERENCE_CHILDREN = 'audio,language,speed,text';\n    protected INTERACTIONS_CHILDREN = 'id,objectives,time,type,correct_responses,weighting,student_response,result,latency';\n\n    // Data ranges.\n    protected SCORE_RANGE = '0#100';\n    protected AUDIO_RANGE = '-1#100';\n    protected SPEED_RANGE = '-100#100';\n    protected WEIGHTING_RANGE = '-100#100';\n    protected TEXT_RANGE = '-1#1';\n\n    // Error messages.\n    protected ERROR_STRINGS = {\n        0: 'No error',\n        101: 'General exception',\n        201: 'Invalid argument error',\n        202: 'Element cannot have children',\n        203: 'Element not an array - cannot have count',\n        301: 'Not initialized',\n        401: 'Not implemented error',\n        402: 'Invalid set value, element is a keyword',\n        403: 'Element is read only',\n        404: 'Element is write only',\n        405: 'Incorrect data type'\n    };\n\n    protected currentUserData = {}; // Current user data.\n    protected def = {}; // Object containing the default values.\n    protected defExtra = {}; // Extra object that will contain the objectives and interactions data (all the .n. elements).\n    protected dataModel = {}; // The SCORM 1.2 data model.\n\n    protected initialized = false; // Whether LMSInitialize has been called.\n    protected errorCode: string; // Last error.\n    protected timeout; // Timeout to commit changes.\n\n    /**\n     * Constructor.\n     *\n     * @param eventsProvider Events provider instance.\n     * @param scormProvider SCORM provider instance.\n     * @param scorm SCORM.\n     * @param scoId Current SCO ID.\n     * @param attempt Attempt number.\n     * @param userData The user default data.\n     * @param mode Mode being played. By default, MODENORMAL.\n     * @param offline Whether the attempt is offline.\n     */\n    constructor(protected eventsProvider: CoreEventsProvider, protected scormProvider: AddonModScormProvider,\n            protected siteId: string, protected scorm: any, protected scoId: number, protected attempt: number,\n            userData: any, protected mode?: string, protected offline?: boolean) {\n\n        this.mode = mode || AddonModScormProvider.MODENORMAL;\n        this.offline = !!offline;\n\n        this.init(userData);\n    }\n\n    /**\n     * Utility function for adding two times in format hh:mm:ss.\n     *\n     * @param first First time.\n     * @param second Second time.\n     * @return Total time.\n     */\n    protected addTime(first: string, second: string): string {\n        const sFirst = first.split(':'),\n            sSecond = second.split(':'),\n            cFirst = sFirst[2].split('.'),\n            cSecond = sSecond[2].split('.');\n        let change = 0;\n\n        let firstCents = 0; // Cents.\n        if (cFirst.length > 1) {\n            firstCents = parseInt(cFirst[1], 10);\n        }\n\n        let secondCents = 0;\n        if (cSecond.length > 1) {\n            secondCents = parseInt(cSecond[1], 10);\n        }\n\n        let cents: string | number = firstCents + secondCents;\n        change = Math.floor(cents / 100);\n        cents = cents - (change * 100);\n        if (Math.floor(cents) < 10) {\n            cents = '0' + cents.toString();\n        }\n\n        let secs: string | number = parseInt(cFirst[0], 10) + parseInt(cSecond[0], 10) + change; // Seconds.\n        change = Math.floor(secs / 60);\n        secs = secs - (change * 60);\n        if (Math.floor(secs) < 10) {\n            secs = '0' + secs.toString();\n        }\n\n        let mins: string | number = parseInt(sFirst[1], 10) + parseInt(sSecond[1], 10) + change; // Minutes.\n        change = Math.floor(mins / 60);\n        mins = mins - (change * 60);\n        if (mins < 10) {\n            mins = '0' + mins.toString();\n        }\n\n        let hours: string | number = parseInt(sFirst[0], 10) + parseInt(sSecond[0], 10) + change; // Hours.\n        if (hours < 10) {\n            hours = '0' + hours.toString();\n        }\n\n        if (cents != '0') {\n            return hours + ':' + mins + ':' + secs + '.' + cents;\n        } else {\n            return hours + ':' + mins + ':' + secs;\n        }\n    }\n\n    /**\n     * Utility function for cloning an object\n     *\n     * @param obj The object to be cloned\n     * @return The object cloned\n     */\n    protected cloneObj(obj: any): any {\n        if (obj == null || typeof(obj) != 'object') {\n            return obj;\n        }\n\n        const temp = new obj.constructor(); // Changed (twice).\n        for (const key in obj) {\n            temp[key] = this.cloneObj(obj[key]);\n        }\n\n        return temp;\n    }\n\n    /**\n     * Collect all the user tracking data that must be persisted in the system, this is usually called by LMSCommit().\n     *\n     * @return Collected data.\n     */\n    protected collectData(): any[] {\n        const data = [];\n\n        for (const element in this.currentUserData[this.scoId]) {\n            // Ommit for example the nav. elements.\n            if (element.substr(0, 3) == 'cmi') {\n                const expression = new RegExp(this.CMI_INDEX, 'g');\n\n                // Get the generic name for this element (e.g. convert 'cmi.interactions.1.id' to 'cmi.interactions.n.id')\n                const elementModel = String(element).replace(expression, '.n.');\n\n                // Ignore the session time element.\n                if (element != 'cmi.core.session_time') {\n\n                    // Check if this specific element is not defined in the datamodel, but the generic element name is.\n                    if (typeof this.dataModel[this.scoId][element] == 'undefined' &&\n                            typeof this.dataModel[this.scoId][elementModel] != 'undefined') {\n\n                        // Add this element to the data model (by cloning the generic element) so we can track changes to it.\n                        this.dataModel[this.scoId][element] = this.cloneObj(this.dataModel[this.scoId][elementModel]);\n                    }\n\n                    // Check if the current element exists in the datamodel.\n                    if (typeof this.dataModel[this.scoId][element] != 'undefined') {\n\n                        // Make sure this is not a read only element.\n                        if (this.dataModel[this.scoId][element].mod != 'r') {\n\n                            const el = {\n                                // Moodle stores the organizations and interactions using _n. instead .n.\n                                element: element.replace(expression, '_$1.'),\n                                value: this.getEl(element)\n                            };\n\n                            // Check if the element has a default value.\n                            if (typeof this.dataModel[this.scoId][element].defaultvalue != 'undefined') {\n\n                                // Check if the default value is different from the current value.\n                                if (this.dataModel[this.scoId][element].defaultvalue != el.value ||\n                                        typeof this.dataModel[this.scoId][element].defaultvalue != typeof(el.value)) {\n\n                                    data.push(el);\n\n                                    // Update the element default to reflect the current committed value.\n                                    this.dataModel[this.scoId][element].defaultvalue = el.value;\n                                }\n                            } else {\n                                data.push(el);\n\n                                // No default value for the element, so set it now.\n                                this.dataModel[this.scoId][element].defaultvalue = el.value;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return data;\n    }\n\n    /**\n     * Get the value of the given element from the non-persistent (current) user data.\n     *\n     * @param el The element\n     * @return The element value\n     */\n    protected getEl(el: string): any {\n        if (typeof this.currentUserData[this.scoId] != 'undefined' && typeof this.currentUserData[this.scoId][el] != 'undefined') {\n            return this.currentUserData[this.scoId][el];\n        }\n\n        return '';\n    }\n\n    /**\n     * Initialize the model.\n     *\n     * @param userData The user default data.\n     */\n    protected init(userData: any): void {\n        // Prepare the definition array containing the default values.\n        for (const scoId in userData) {\n            const sco = userData[scoId];\n            this.def[scoId] = sco.defaultdata;\n            this.defExtra[scoId] = sco.userdata;\n        }\n\n        // Set up data model for each SCO.\n        for (const scoId in this.def) {\n            this.dataModel[scoId] = {\n                'cmi._children': { defaultvalue: this.CMI_CHILDREN, mod: 'r', writeerror: '402' },\n                'cmi._version': { defaultvalue: '3.4', mod: 'r', writeerror: '402' },\n                'cmi.core._children': { defaultvalue: this.CORE_CHILDREN, mod: 'r', writeerror: '402' },\n                'cmi.core.student_id': { defaultvalue: this.def[scoId]['cmi.core.student_id'], mod: 'r', writeerror: '403' },\n                'cmi.core.student_name': { defaultvalue: this.def[scoId]['cmi.core.student_name'], mod: 'r', writeerror: '403' },\n                'cmi.core.lesson_location': { defaultvalue: this.def[scoId]['cmi.core.lesson_location'],\n                        format: this.CMI_STRING_256, mod: 'rw', writeerror: '405' },\n                'cmi.core.credit': { defaultvalue: this.def[scoId]['cmi.core.credit'], mod: 'r', writeerror: '403' },\n                'cmi.core.lesson_status': { defaultvalue: this.def[scoId]['cmi.core.lesson_status'], format: this.CMI_STATUS,\n                        mod: 'rw', writeerror: '405' },\n                'cmi.core.entry': { defaultvalue: this.def[scoId]['cmi.core.entry'], mod: 'r', writeerror: '403' },\n                'cmi.core.score._children': { defaultvalue: this.SCORE_CHILDREN, mod: 'r', writeerror: '402' },\n                'cmi.core.score.raw': { defaultvalue: this.def[scoId]['cmi.core.score.raw'], format: this.CMI_DECIMAL,\n                        range: this.SCORE_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.core.score.max': { defaultvalue: this.def[scoId]['cmi.core.score.max'], format: this.CMI_DECIMAL,\n                        range: this.SCORE_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.core.score.min': { defaultvalue: this.def[scoId]['cmi.core.score.min'], format: this.CMI_DECIMAL,\n                        range: this.SCORE_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.core.total_time': { defaultvalue: this.def[scoId]['cmi.core.total_time'], mod: 'r', writeerror: '403' },\n                'cmi.core.lesson_mode': { defaultvalue: this.def[scoId]['cmi.core.lesson_mode'], mod: 'r', writeerror: '403' },\n                'cmi.core.exit': { defaultvalue: this.def[scoId]['cmi.core.exit'], format: this.CMI_EXIT, mod: 'w',\n                        readerror: '404', writeerror: '405' },\n                'cmi.core.session_time': { format: this.CMI_TIMESPAN, mod: 'w', defaultvalue: '00:00:00', readerror: '404',\n                        writeerror: '405' },\n                'cmi.suspend_data': { defaultvalue: this.def[scoId]['cmi.suspend_data'], format: this.CMI_STRING_4096,\n                        mod: 'rw', writeerror: '405' },\n                'cmi.launch_data': { defaultvalue: this.def[scoId]['cmi.launch_data'], mod: 'r', writeerror: '403' },\n                'cmi.comments': { defaultvalue: this.def[scoId]['cmi.comments'], format: this.CMI_STRING_4096, mod: 'rw',\n                        writeerror: '405' },\n                // Deprecated evaluation attributes.\n                'cmi.evaluation.comments._count': { defaultvalue: '0', mod: 'r', writeerror: '402' },\n                'cmi.evaluation.comments._children': { defaultvalue: this.COMMENTS_CHILDREN, mod: 'r', writeerror: '402' },\n                'cmi.evaluation.comments.n.content': { defaultvalue: '', pattern: this.CMI_INDEX, format: this.CMI_STRING_256,\n                        mod: 'rw', writeerror: '405' },\n                'cmi.evaluation.comments.n.location': { defaultvalue: '', pattern: this.CMI_INDEX, format: this.CMI_STRING_256,\n                        mod: 'rw', writeerror: '405' },\n                'cmi.evaluation.comments.n.time': { defaultvalue: '', pattern: this.CMI_INDEX, format: this.CMI_TIME,\n                        mod: 'rw', writeerror: '405' },\n                'cmi.comments_from_lms': { mod: 'r', writeerror: '403' },\n                'cmi.objectives._children': { defaultvalue: this.OBJECTIVES_CHILDREN, mod: 'r', writeerror: '402' },\n                'cmi.objectives._count': { mod: 'r', defaultvalue: '0', writeerror: '402' },\n                'cmi.objectives.n.id': { pattern: this.CMI_INDEX, format: this.CMI_IDENTIFIER, mod: 'rw', writeerror: '405' },\n                'cmi.objectives.n.score._children': { pattern: this.CMI_INDEX, mod: 'r', writeerror: '402' },\n                'cmi.objectives.n.score.raw': { defaultvalue: '', pattern: this.CMI_INDEX, format: this.CMI_DECIMAL,\n                        range: this.SCORE_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.objectives.n.score.min': { defaultvalue: '', pattern: this.CMI_INDEX, format: this.CMI_DECIMAL,\n                        range: this.SCORE_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.objectives.n.score.max': { defaultvalue: '', pattern: this.CMI_INDEX, format: this.CMI_DECIMAL,\n                        range: this.SCORE_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.objectives.n.status': { pattern: this.CMI_INDEX, format: this.CMI_STATUS_2, mod: 'rw', writeerror: '405' },\n                'cmi.student_data._children': { defaultvalue: this.STUDENT_DATA_CHILDREN, mod: 'r', writeerror: '402' },\n                'cmi.student_data.mastery_score': { defaultvalue: this.def[scoId]['cmi.student_data.mastery_score'], mod: 'r',\n                        writeerror: '403' },\n                'cmi.student_data.max_time_allowed': { defaultvalue: this.def[scoId]['cmi.student_data.max_time_allowed'],\n                        mod: 'r', writeerror: '403' },\n                'cmi.student_data.time_limit_action': { defaultvalue: this.def[scoId]['cmi.student_data.time_limit_action'],\n                        mod: 'r', writeerror: '403' },\n                'cmi.student_preference._children': { defaultvalue: this.STUDENT_PREFERENCE_CHILDREN, mod: 'r',\n                        writeerror: '402' },\n                'cmi.student_preference.audio': { defaultvalue: this.def[scoId]['cmi.student_preference.audio'],\n                        format: this.CMI_SINTEGER, range: this.AUDIO_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.student_preference.language': { defaultvalue: this.def[scoId]['cmi.student_preference.language'],\n                        format: this.CMI_STRING_256, mod: 'rw', writeerror: '405' },\n                'cmi.student_preference.speed': { defaultvalue: this.def[scoId]['cmi.student_preference.speed'],\n                        format: this.CMI_SINTEGER, range: this.SPEED_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.student_preference.text': { defaultvalue: this.def[scoId]['cmi.student_preference.text'],\n                        format: this.CMI_SINTEGER, range: this.TEXT_RANGE, mod: 'rw', writeerror: '405' },\n                'cmi.interactions._children': { defaultvalue: this.INTERACTIONS_CHILDREN, mod: 'r', writeerror: '402' },\n                'cmi.interactions._count': { mod: 'r', defaultvalue: '0', writeerror: '402' },\n                'cmi.interactions.n.id': { pattern: this.CMI_INDEX, format: this.CMI_IDENTIFIER, mod: 'w', readerror: '404',\n                        writeerror: '405' },\n                'cmi.interactions.n.objectives._count': { pattern: this.CMI_INDEX, mod: 'r', defaultvalue: '0', writeerror: '402' },\n                'cmi.interactions.n.objectives.n.id': { pattern: this.CMI_INDEX, format: this.CMI_IDENTIFIER, mod: 'w',\n                        readerror: '404', writeerror: '405' },\n                'cmi.interactions.n.time': { pattern: this.CMI_INDEX, format: this.CMI_TIME, mod: 'w', readerror: '404',\n                        writeerror: '405' },\n                'cmi.interactions.n.type': { pattern: this.CMI_INDEX, format: this.CMI_TYPE, mod: 'w', readerror: '404',\n                        writeerror: '405' },\n                'cmi.interactions.n.correct_responses._count': { pattern: this.CMI_INDEX, mod: 'r', defaultvalue: '0',\n                        writeerror: '402' },\n                'cmi.interactions.n.correct_responses.n.pattern': { pattern: this.CMI_INDEX, format: this.CMI_FEEDBACK,\n                        mod: 'w', readerror: '404', writeerror: '405' },\n                'cmi.interactions.n.weighting': { pattern: this.CMI_INDEX, format: this.CMI_DECIMAL,\n                        range: this.WEIGHTING_RANGE, mod: 'w', readerror: '404', writeerror: '405' },\n                'cmi.interactions.n.student_response': { pattern: this.CMI_INDEX, format: this.CMI_FEEDBACK, mod: 'w',\n                        readerror: '404', writeerror: '405' },\n                'cmi.interactions.n.result': { pattern: this.CMI_INDEX, format: this.CMI_RESULT, mod: 'w', readerror: '404',\n                        writeerror: '405' },\n                'cmi.interactions.n.latency': { pattern: this.CMI_INDEX, format: this.CMI_TIMESPAN, mod: 'w',\n                        readerror: '404', writeerror: '405' },\n                'nav.event': { defaultvalue: '', format: this.NAV_EVENT, mod: 'w', readerror: '404', writeerror: '405' }\n            };\n\n            this.currentUserData[scoId] = {};\n\n            // Load default values.\n            for (const element in this.dataModel[scoId]) {\n                if (element.match(/\\.n\\./) === null) {\n                    if (typeof this.dataModel[scoId][element].defaultvalue != 'undefined') {\n                        this.currentUserData[scoId][element] = this.dataModel[scoId][element].defaultvalue;\n                    }\n                }\n            }\n\n            // Load initial user data for current SCO.\n            for (const element in this.def[scoId]) {\n                if (element.match(/\\.n\\./) === null) {\n                    if (typeof this.dataModel[scoId][element].defaultvalue != 'undefined') {\n                        this.currentUserData[scoId][element] = this.dataModel[scoId][element].defaultvalue;\n                    } else if (typeof this.defExtra[scoId][element] != 'undefined') {\n                        // Check in user data values.\n                        this.currentUserData[scoId][element] = this.defExtra[scoId][element];\n                    } else {\n                        this.currentUserData[scoId][element] = '';\n                    }\n                }\n            }\n\n            // Load interactions and objectives, and init the counters.\n            const expression = new RegExp(this.CMI_INDEX, 'g');\n\n            for (const element in this.defExtra[scoId]) {\n                let counterElement = '',\n                    currentCounterIndex: any = 0,\n                    elementDotFormat,\n                    currentN;\n\n                // This check for an indexed element. cmi.objectives.1.id or cmi.objectives_1.id.\n                if (element.match(expression)) {\n                    // Normalize to the expected value according the standard.\n                    // Moodle stores this values using _n. instead .n.\n                    elementDotFormat = element.replace(expression, '.$1.');\n                    this.currentUserData[scoId][elementDotFormat] = this.defExtra[scoId][element];\n\n                    // Get the correct counter and current index.\n                    if (elementDotFormat.indexOf('cmi.evaluation.comments') === 0) {\n                        counterElement = 'cmi.evaluation.comments._count';\n                        currentCounterIndex = elementDotFormat.match(/.(\\d+)./)[1];\n                    } else if (elementDotFormat.indexOf('cmi.objectives') === 0) {\n                        counterElement = 'cmi.objectives._count';\n                        currentCounterIndex = elementDotFormat.match(/.(\\d+)./)[1];\n                    } else if (elementDotFormat.indexOf('cmi.interactions') === 0) {\n                        if (elementDotFormat.indexOf('.objectives.') > 0) {\n                            currentN = elementDotFormat.match(/cmi.interactions.(\\d+)./)[1];\n                            currentCounterIndex = elementDotFormat.match(/objectives.(\\d+)./)[1];\n                            counterElement = 'cmi.interactions.' + currentN + '.objectives._count';\n                        } else if (elementDotFormat.indexOf('.correct_responses.') > 0) {\n                            currentN = elementDotFormat.match(/cmi.interactions.(\\d+)./)[1];\n                            currentCounterIndex = elementDotFormat.match(/correct_responses.(\\d+)./)[1];\n                            counterElement = 'cmi.interactions.' + currentN + '.correct_responses._count';\n                        } else {\n                            counterElement = 'cmi.interactions._count';\n                            currentCounterIndex = elementDotFormat.match(/.(\\d+)./)[1];\n                        }\n                    }\n\n                    if (counterElement) {\n                        if (typeof this.currentUserData[scoId][counterElement] == 'undefined') {\n                            this.currentUserData[scoId][counterElement] = 0;\n                        }\n                        // Check if we need to sum.\n                        if (parseInt(currentCounterIndex) == parseInt(this.currentUserData[scoId][counterElement])) {\n                            this.currentUserData[scoId][counterElement] = parseInt(this.currentUserData[scoId][counterElement]) + 1;\n                        }\n                        if (parseInt(currentCounterIndex) > parseInt(this.currentUserData[scoId][counterElement])) {\n                            this.currentUserData[scoId][counterElement] = parseInt(currentCounterIndex) - 1;\n                        }\n                    }\n\n                }\n            }\n\n            // Set default status.\n            if (this.currentUserData[scoId]['cmi.core.lesson_status'] === '') {\n                this.currentUserData[scoId]['cmi.core.lesson_status'] = 'not attempted';\n            }\n\n            // Define mode and credit.\n            this.currentUserData[scoId]['cmi.core.credit'] = this.mode == AddonModScormProvider.MODENORMAL ? 'credit' : 'no-credit';\n            this.currentUserData[scoId]['cmi.core.lesson_mode'] = this.mode;\n        }\n    }\n\n    /**\n     * Commit the changes.\n     *\n     * @param param Param.\n     * @return \"true\" if success, \"false\" otherwise.\n     */\n    LMSCommit(param: string): string {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n\n        this.errorCode = '0';\n        if (param == '') {\n            if (this.initialized) {\n                const result = this.storeData(false);\n\n                // Trigger TOC update.\n                this.triggerEvent(AddonModScormProvider.UPDATE_TOC_EVENT);\n\n                this.errorCode = result ? '0' : '101';\n\n                // Conver to string representing a boolean.\n                return result ? 'true' : 'false';\n            } else {\n                this.errorCode = '301';\n            }\n        } else {\n            this.errorCode = '201';\n        }\n\n        return 'false';\n    }\n\n    /**\n     * Finish the data model.\n     *\n     * @param param Param.\n     * @return \"true\" if success, \"false\" otherwise.\n     */\n    LMSFinish(param: string): string {\n        this.errorCode = '0';\n\n        if (param == '') {\n            if (this.initialized) {\n                this.initialized = false;\n\n                const result = this.storeData(true);\n                if (this.getEl('nav.event') != '') {\n                    if (this.getEl('nav.event') == 'continue') {\n                        this.triggerEvent(AddonModScormProvider.LAUNCH_NEXT_SCO_EVENT);\n                    } else {\n                        this.triggerEvent(AddonModScormProvider.LAUNCH_PREV_SCO_EVENT);\n                    }\n                } else {\n                    if (this.scorm.auto == '1') {\n                        this.triggerEvent(AddonModScormProvider.LAUNCH_NEXT_SCO_EVENT);\n                    }\n                }\n\n                this.errorCode = result ? '0' : '101';\n\n                // Trigger TOC update.\n                this.triggerEvent(AddonModScormProvider.UPDATE_TOC_EVENT);\n\n                // Conver to string representing a boolean.\n                return result ? 'true' : 'false';\n            } else {\n                this.errorCode = '301';\n            }\n        } else {\n            this.errorCode = '201';\n        }\n\n        return 'false';\n    }\n\n    /**\n     * Get diagnostic.\n     *\n     * @param param Param.\n     * @return Result.\n     */\n    LMSGetDiagnostic(param: string): string {\n        if (param == '') {\n            param = this.errorCode;\n        }\n\n        return param;\n    }\n\n    /**\n     * Get the error message for a certain code.\n     *\n     * @param param Error code.\n     * @return Error message.\n     */\n    LMSGetErrorString(param: string): string {\n        if (param != '') {\n            return this.ERROR_STRINGS[param];\n        } else {\n           return '';\n        }\n    }\n\n    /**\n     * Get the last error code.\n     *\n     * @return Last error code.\n     */\n    LMSGetLastError(): string {\n        return this.errorCode;\n    }\n\n    /**\n     * Get the value of a certain element.\n     *\n     * @param element Name of the element to get.\n     * @return Value.\n     */\n    LMSGetValue(element: string): string {\n        this.errorCode = '0';\n\n        if (this.initialized) {\n            if (element != '') {\n                const expression = new RegExp(this.CMI_INDEX, 'g'),\n                    elementModel = String(element).replace(expression, '.n.');\n\n                if (typeof this.dataModel[this.scoId][elementModel] != 'undefined') {\n                    if (this.dataModel[this.scoId][elementModel].mod != 'w') {\n                        this.errorCode = '0';\n\n                        return this.getEl(element);\n                    } else {\n                        this.errorCode = this.dataModel[this.scoId][elementModel].readerror;\n                    }\n                } else {\n                    const childrenStr = '._children',\n                        countStr = '._count';\n\n                    if (elementModel.substr(elementModel.length - childrenStr.length, elementModel.length) == childrenStr) {\n                        const parentModel = elementModel.substr(0, elementModel.length - childrenStr.length);\n\n                        if (typeof this.dataModel[this.scoId][parentModel] != 'undefined') {\n                            this.errorCode = '202';\n                        } else {\n                            this.errorCode = '201';\n                        }\n                    } else if (elementModel.substr(elementModel.length - countStr.length, elementModel.length) == countStr) {\n                        const parentModel = elementModel.substr(0, elementModel.length - countStr.length);\n\n                        if (typeof this.dataModel[this.scoId][parentModel] != 'undefined') {\n                            this.errorCode = '203';\n                        } else {\n                            this.errorCode = '201';\n                        }\n                    } else {\n                        this.errorCode = '201';\n                    }\n                }\n            } else {\n                this.errorCode = '201';\n            }\n        } else {\n            this.errorCode = '301';\n        }\n\n        return '';\n    }\n\n    /**\n     * Initialize the data model.\n     *\n     * @param param Param.\n     * @return \"true\" if initialized, \"false\" otherwise.\n     */\n    LMSInitialize(param: string): string {\n        this.errorCode = '0';\n\n        if (param == '') {\n            if (!this.initialized) {\n                this.initialized = true;\n                this.errorCode = '0';\n\n                return 'true';\n            } else {\n                this.errorCode = '101';\n            }\n        } else {\n            this.errorCode = '201';\n        }\n\n        return 'false';\n    }\n\n    /**\n     * Set the value of a certain element.\n     *\n     * @param element Name of the element to set.\n     * @param value Value to set.\n     * @return \"true\" if success, \"false\" otherwise.\n     */\n    LMSSetValue(element: string, value: any): string {\n        this.errorCode = '0';\n\n        if (this.initialized) {\n            if (element != '') {\n                let expression = new RegExp(this.CMI_INDEX, 'g');\n                const elementModel = String(element).replace(expression, '.n.');\n\n                if (typeof this.dataModel[this.scoId][elementModel] != 'undefined') {\n                    if (this.dataModel[this.scoId][elementModel].mod != 'r') {\n                        expression = new RegExp(this.dataModel[this.scoId][elementModel].format);\n                        value = value + '';\n\n                        const matches = value.match(expression);\n\n                        if (matches != null) {\n                            // Create dynamic data model element.\n                            if (element != elementModel) {\n\n                                // Init default counters and values.\n                                if (element.indexOf('cmi.objectives') === 0) {\n                                    const currentN = element.match(/cmi.objectives.(\\d+)./)[1],\n                                        counterElement = 'cmi.objectives.' + currentN + '.score';\n\n                                    if (typeof this.currentUserData[this.scoId][counterElement + '._children'] == 'undefined') {\n                                        this.setEl(this.currentUserData[this.scoId][counterElement + '._children'],\n                                                this.SCORE_CHILDREN);\n                                        this.setEl(this.currentUserData[this.scoId][counterElement + '.raw'], '');\n                                        this.setEl(this.currentUserData[this.scoId][counterElement + '.min'], '');\n                                        this.setEl(this.currentUserData[this.scoId][counterElement + '.max'], '');\n                                    }\n\n                                } else if (element.indexOf('cmi.interactions') === 0) {\n                                    const currentN = element.match(/cmi.interactions.(\\d+)./)[1];\n                                    let counterElement = 'cmi.interactions.' + currentN + '.objectives._count';\n\n                                    if (typeof this.currentUserData[this.scoId][counterElement] == 'undefined') {\n                                        this.setEl(counterElement, 0);\n                                    }\n\n                                    counterElement = 'cmi.interactions.' + currentN + '.correct_responses._count';\n                                    if (typeof this.currentUserData[this.scoId][counterElement] == 'undefined') {\n                                        this.setEl(counterElement, 0);\n                                    }\n                                }\n\n                                const elementIndexes = element.split('.');\n                                let subElement = 'cmi';\n\n                                for (let i = 1; i < elementIndexes.length - 1; i++) {\n                                    const elementIndex = elementIndexes[i];\n\n                                    if (elementIndexes[i + 1].match(/^\\d+$/)) {\n                                        const counterElement = subElement + '.' + elementIndex + '._count';\n\n                                        if (typeof this.currentUserData[this.scoId][counterElement] == 'undefined') {\n                                            this.setEl(counterElement, 0);\n                                        }\n\n                                        if (elementIndexes[i + 1] == this.getEl(counterElement)) {\n                                            const count = this.getEl(counterElement);\n                                            this.setEl(counterElement, parseInt(count, 10) + 1);\n                                        }\n\n                                        if (elementIndexes[i + 1] > this.getEl(counterElement)) {\n                                            this.errorCode = '201';\n                                        }\n\n                                        subElement = subElement.concat('.' + elementIndex + '.' + elementIndexes[i + 1]);\n                                        i++;\n                                    } else {\n                                        subElement = subElement.concat('.' + elementIndex);\n                                    }\n                                }\n\n                                element = subElement.concat('.' + elementIndexes[elementIndexes.length - 1]);\n                            }\n\n                            // Store data.\n                            if (this.errorCode == '0') {\n                                if (this.scorm.autocommit && !(this.timeout)) {\n                                    this.timeout = setTimeout(this.LMSCommit.bind(this), 60000, ['']);\n                                }\n\n                                if (typeof this.dataModel[this.scoId][elementModel].range != 'undefined') {\n                                    const range = this.dataModel[this.scoId][elementModel].range,\n                                        ranges = range.split('#');\n\n                                    value = value * 1.0;\n                                    if ((value >= ranges[0]) && (value <= ranges[1])) {\n                                        this.setEl(element, value);\n                                        this.errorCode = '0';\n\n                                        return 'true';\n                                    } else {\n                                        this.errorCode = this.dataModel[this.scoId][elementModel].writeerror;\n                                    }\n                                } else {\n                                    if (element == 'cmi.comments') {\n                                        this.setEl('cmi.comments', this.getEl('cmi.comments') + value);\n                                    } else {\n                                        this.setEl(element, value);\n                                    }\n                                    this.errorCode = '0';\n\n                                    return 'true';\n                                }\n                            }\n                        } else {\n                            this.errorCode = this.dataModel[this.scoId][elementModel].writeerror;\n                        }\n                    } else {\n                        this.errorCode = this.dataModel[this.scoId][elementModel].writeerror;\n                    }\n                } else {\n                    this.errorCode = '201';\n                }\n            } else {\n                this.errorCode = '201';\n            }\n        } else {\n            this.errorCode = '301';\n        }\n\n        return 'false';\n    }\n\n    /**\n     * Set a SCO ID.\n     * The scoId is like a pointer to be able to retrieve the SCO default values and set the new ones in the overall SCORM\n     * data structure.\n     *\n     * @param scoId The new SCO id.\n     */\n    loadSco(scoId: number): void {\n        this.scoId = scoId;\n    }\n\n    /**\n     * Set the value of the given element in the non-persistent (current) user data.\n     *\n     * @param el The element.\n     * @param value The value.\n     */\n    protected setEl(el: string, value: any): void {\n        if (typeof this.currentUserData[this.scoId] == 'undefined') {\n            this.currentUserData[this.scoId] = {};\n        }\n\n        this.currentUserData[this.scoId][el] = value;\n    }\n\n    /**\n     * Set offline mode to true or false.\n     *\n     * @param offline True if offline, false otherwise.\n     */\n    setOffline(offline: boolean): void {\n        this.offline = offline;\n    }\n\n    /**\n     * Persist the current user data (this is usually called by LMSCommit).\n     *\n     * @param storeTotalTime If true, we need to calculate the total time too.\n     * @return True if success, false otherwise.\n     */\n    protected storeData(storeTotalTime?: boolean): boolean {\n        let tracks;\n\n        if (storeTotalTime) {\n            if (this.getEl('cmi.core.lesson_status') == 'not attempted') {\n                this.setEl('cmi.core.lesson_status', 'completed');\n            }\n\n            if (this.getEl('cmi.core.lesson_mode') == AddonModScormProvider.MODENORMAL) {\n                if (this.getEl('cmi.core.credit') == 'credit') {\n                    if (this.getEl('cmi.student_data.mastery_score') !== '' && this.getEl('cmi.core.score.raw') !== '') {\n                        if (parseFloat(this.getEl('cmi.core.score.raw')) >=\n                                parseFloat(this.getEl('cmi.student_data.mastery_score'))) {\n                            this.setEl('cmi.core.lesson_status', 'passed');\n                        } else {\n                            this.setEl('cmi.core.lesson_status', 'failed');\n                        }\n                    }\n                }\n            }\n\n            if (this.getEl('cmi.core.lesson_mode') == AddonModScormProvider.MODEBROWSE) {\n                if (this.dataModel[this.scoId]['cmi.core.lesson_status'].defaultvalue == '' &&\n                        this.getEl('cmi.core.lesson_status') == 'not attempted') {\n                    this.setEl('cmi.core.lesson_status', 'browsed');\n                }\n            }\n\n            tracks = this.collectData();\n            tracks.push(this.totalTime());\n        } else {\n            tracks = this.collectData();\n        }\n\n        const success = this.scormProvider.saveTracksSync(this.scoId, this.attempt, tracks, this.scorm, this.offline,\n                this.currentUserData);\n\n        if (!this.offline && !success) {\n            // Failure storing data in online. Go offline.\n            this.offline = true;\n\n            this.triggerEvent(AddonModScormProvider.GO_OFFLINE_EVENT);\n\n            return this.scormProvider.saveTracksSync(this.scoId, this.attempt, tracks, this.scorm, this.offline,\n                    this.currentUserData);\n        }\n\n        return success;\n    }\n\n    /**\n     * Utility function for calculating the total time spent in the SCO.\n     *\n     * @return Total time element.\n     */\n    protected totalTime(): any {\n        const totalTime = this.addTime(this.getEl('cmi.core.total_time'), this.getEl('cmi.core.session_time'));\n\n        return { element: 'cmi.core.total_time', value: totalTime };\n    }\n\n    /**\n     * Convenience function to trigger events.\n     *\n     * @param name Name of the event to trigger.\n     */\n    protected triggerEvent(name: string): void {\n        this.eventsProvider.trigger(name, {\n            scormId: this.scorm.id,\n            scoId: this.scoId,\n            attempt: this.attempt\n        }, this.siteId);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/scorm/classes/data-model-12.ts","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { NavParams, ModalController } from 'ionic-angular';\nimport { CoreEventsProvider } from '@providers/events';\nimport { CoreSitesProvider } from '@providers/sites';\nimport { CoreSyncProvider } from '@providers/sync';\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\nimport { CoreTimeUtilsProvider } from '@providers/utils/time';\nimport { CoreIonTabsComponent } from '@components/ion-tabs/ion-tabs';\nimport { AddonModScormProvider, AddonModScormAttemptCountResult } from '../../providers/scorm';\nimport { AddonModScormHelperProvider } from '../../providers/helper';\nimport { AddonModScormSyncProvider } from '../../providers/scorm-sync';\nimport { AddonModScormDataModel12 } from '../../classes/data-model-12';\n\n/**\n * Page that allows playing a SCORM.\n */\n\n@Component({\n    selector: 'page-addon-mod-scorm-player',\n    templateUrl: 'player.html',\n})\nexport class AddonModScormPlayerPage implements OnInit, OnDestroy {\n\n    title: string; // Title.\n    scorm: any; // The SCORM object.\n    showToc: boolean; // Whether to show the table of contents (TOC).\n    loadingToc = true; // Whether the TOC is being loaded.\n    toc: any[]; // List of SCOs.\n    loaded: boolean; // Whether the data has been loaded.\n    previousSco: any; // Previous SCO.\n    nextSco: any; // Next SCO.\n    src: string; // Iframe src.\n    errorMessage: string; // Error message.\n    accessInfo: any; // Access information.\n\n    protected siteId: string;\n    protected mode: string; // Mode to play the SCORM.\n    protected newAttempt: boolean; // Whether to start a new attempt.\n    protected organizationId: string; // Organization ID to load.\n    protected attempt: number; // The attempt number.\n    protected offline = false; // Whether it's offline mode.\n    protected userData: any; // User data.\n    protected initialScoId: number; // Initial SCO ID to load.\n    protected currentSco: any; // Current SCO.\n    protected dataModel: AddonModScormDataModel12; // Data Model.\n    protected attemptToContinue: number; // Attempt to continue (for the popover).\n\n    // Observers.\n    protected tocObserver: any;\n    protected launchNextObserver: any;\n    protected launchPrevObserver: any;\n    protected goOfflineObserver: any;\n\n    constructor(navParams: NavParams, protected modalCtrl: ModalController, protected eventsProvider: CoreEventsProvider,\n            protected sitesProvider: CoreSitesProvider, protected syncProvider: CoreSyncProvider,\n            protected domUtils: CoreDomUtilsProvider, protected timeUtils: CoreTimeUtilsProvider,\n            protected scormProvider: AddonModScormProvider, protected scormHelper: AddonModScormHelperProvider,\n            protected scormSyncProvider: AddonModScormSyncProvider, protected tabs: CoreIonTabsComponent) {\n\n        this.scorm = navParams.get('scorm') || {};\n        this.mode = navParams.get('mode') || AddonModScormProvider.MODENORMAL;\n        this.newAttempt = !!navParams.get('newAttempt');\n        this.organizationId = navParams.get('organizationId');\n        this.initialScoId = navParams.get('scoId');\n        this.siteId = this.sitesProvider.getCurrentSiteId();\n\n        // We use SCORM name at start, later we'll use the SCO title.\n        this.title = this.scorm.name;\n\n        // Block the SCORM so it cannot be synchronized.\n        this.syncProvider.blockOperation(AddonModScormProvider.COMPONENT, this.scorm.id, 'player');\n    }\n\n    /**\n     * Component being initialized.\n     */\n    ngOnInit(): void {\n\n        this.showToc = this.scormProvider.displayTocInPlayer(this.scorm);\n\n        if (this.scorm.popup) {\n            this.tabs.changeVisibility(false);\n\n            // If we receive a value <= 100 we need to assume it's a percentage.\n            if (this.scorm.width <= 100) {\n                this.scorm.width = this.scorm.width + '%';\n            }\n            if (this.scorm.height <= 100) {\n                this.scorm.height = this.scorm.height + '%';\n            }\n        }\n\n        // Fetch the SCORM data.\n        this.fetchData().then(() => {\n            if (this.currentSco) {\n                // Set start time if it's a new attempt.\n                const promise = this.newAttempt ? this.setStartTime(this.currentSco.id) : Promise.resolve();\n\n                return promise.catch((error) => {\n                    this.domUtils.showErrorModalDefault(error, 'addon.mod_scorm.errorgetscorm', true);\n                }).finally(() => {\n                    // Load SCO.\n                    this.loadSco(this.currentSco);\n                });\n            }\n        }).finally(() => {\n            this.loaded = true;\n        });\n\n        // Listen for events to update the TOC, navigate through SCOs and go offline.\n        this.tocObserver = this.eventsProvider.on(AddonModScormProvider.UPDATE_TOC_EVENT, (data) => {\n            if (data.scormId === this.scorm.id) {\n                if (this.offline) {\n                    // Wait a bit to make sure data is stored.\n                    setTimeout(this.refreshToc.bind(this), 100);\n                } else {\n                    this.refreshToc();\n                }\n            }\n        }, this.siteId);\n\n        this.launchNextObserver = this.eventsProvider.on(AddonModScormProvider.LAUNCH_NEXT_SCO_EVENT, (data) => {\n            if (data.scormId === this.scorm.id && this.nextSco) {\n                this.loadSco(this.nextSco);\n            }\n        }, this.siteId);\n\n        this.launchPrevObserver = this.eventsProvider.on(AddonModScormProvider.LAUNCH_PREV_SCO_EVENT, (data) => {\n            if (data.scormId === this.scorm.id && this.previousSco) {\n                this.loadSco(this.previousSco);\n            }\n        }, this.siteId);\n\n        this.goOfflineObserver = this.eventsProvider.on(AddonModScormProvider.GO_OFFLINE_EVENT, (data) => {\n            if (data.scormId === this.scorm.id && !this.offline) {\n                this.offline = true;\n\n                // Wait a bit to prevent collisions between this store and SCORM API's store.\n                setTimeout(() => {\n                    this.scormHelper.convertAttemptToOffline(this.scorm, this.attempt).catch((error) => {\n                        this.domUtils.showErrorModalDefault(error, 'core.error', true);\n                    }).then(() => {\n                        this.refreshToc();\n                    });\n                }, 200);\n            }\n        }, this.siteId);\n    }\n\n    /**\n     * Calculate the next and previous SCO.\n     *\n     * @param scoId Current SCO ID.\n     */\n    protected calculateNextAndPreviousSco(scoId: number): void {\n        this.previousSco = this.scormHelper.getPreviousScoFromToc(this.toc, scoId);\n        this.nextSco = this.scormHelper.getNextScoFromToc(this.toc, scoId);\n    }\n\n    /**\n     * Determine the attempt to use, the mode (normal/preview) and if it's offline or online.\n     *\n     * @param attemptsData Attempts count.\n     * @return Promise resolved when done.\n     */\n    protected determineAttemptAndMode(attemptsData: AddonModScormAttemptCountResult): Promise<any> {\n        let result;\n\n        return this.scormHelper.determineAttemptToContinue(this.scorm, attemptsData).then((data) => {\n            this.attempt = data.number;\n            this.offline = data.offline;\n\n            if (this.attempt != attemptsData.lastAttempt.number) {\n                this.attemptToContinue = this.attempt;\n            }\n\n            // Check if current attempt is incomplete.\n            if (this.attempt > 0) {\n                return this.scormProvider.isAttemptIncomplete(this.scorm.id, this.attempt, this.offline);\n            } else {\n                // User doesn't have attempts. Last attempt is not incomplete (since he doesn't have any).\n                return false;\n            }\n        }).then((incomplete) => {\n            // Determine mode and attempt to use.\n            result = this.scormProvider.determineAttemptAndMode(this.scorm, this.mode, this.attempt, this.newAttempt, incomplete);\n\n            if (result.attempt > this.attempt) {\n                // We're creating a new attempt.\n                if (this.offline) {\n                    // Last attempt was offline, so we'll create a new offline attempt.\n                    return this.scormHelper.createOfflineAttempt(this.scorm, result.attempt, attemptsData.online.length);\n                } else {\n                    // Last attempt was online, verify that we can create a new online attempt. We ignore cache.\n                    return this.scormProvider.getScormUserData(this.scorm.id, result.attempt, undefined, false, true).catch(() => {\n                        // Cannot communicate with the server, create an offline attempt.\n                        this.offline = true;\n\n                        return this.scormHelper.createOfflineAttempt(this.scorm, result.attempt, attemptsData.online.length);\n                    });\n                }\n            }\n        }).then(() => {\n            this.mode = result.mode;\n            this.newAttempt = result.newAttempt;\n            this.attempt = result.attempt;\n        });\n    }\n\n    /**\n     * Fetch data needed to play the SCORM.\n     *\n     * @return Promise resolved when done.\n     */\n    protected fetchData(): Promise<any> {\n        // Wait for any ongoing sync to finish. We won't sync a SCORM while it's being played.\n        return this.scormSyncProvider.waitForSync(this.scorm.id).then(() => {\n            // Get attempts data.\n            return this.scormProvider.getAttemptCount(this.scorm.id).then((attemptsData) => {\n                return this.determineAttemptAndMode(attemptsData).then(() => {\n                    // Fetch TOC and get user data.\n                    const promises = [];\n\n                    promises.push(this.fetchToc());\n                    promises.push(this.scormProvider.getScormUserData(this.scorm.id, this.attempt, undefined, this.offline)\n                            .then((data) => {\n                        this.userData = data;\n                    }));\n                    // Get access information.\n                    promises.push(this.scormProvider.getAccessInformation(this.scorm.id).then((accessInfo) => {\n                        this.accessInfo = accessInfo;\n                    }));\n\n                    return Promise.all(promises);\n                });\n            }).catch((error) => {\n                this.domUtils.showErrorModalDefault(error, 'addon.mod_scorm.errorgetscorm', true);\n            });\n        });\n    }\n\n    /**\n     * Fetch the TOC.\n     *\n     * @return Promise resolved when done.\n     */\n    protected fetchToc(): Promise<any> {\n        this.loadingToc = true;\n\n        // We need to check incomplete again: attempt number or status might have changed.\n        return this.scormProvider.isAttemptIncomplete(this.scorm.id, this.attempt, this.offline).then((incomplete) => {\n            this.scorm.incomplete = incomplete;\n\n            // Get TOC.\n            return this.scormProvider.getOrganizationToc(this.scorm.id, this.attempt, this.organizationId, this.offline);\n        }).then((toc) => {\n            this.toc = this.scormProvider.formatTocToArray(toc);\n\n            // Get images for each SCO.\n            this.toc.forEach((sco) => {\n                sco.image = this.scormProvider.getScoStatusIcon(sco, this.scorm.incomplete);\n            });\n\n            if (!this.currentSco) {\n                if (this.newAttempt) {\n                    // Creating a new attempt, use the first SCO defined by the SCORM.\n                    this.initialScoId = this.scorm.launch;\n                }\n\n                // Determine current SCO if we received an ID.\n                if (this.initialScoId > 0) {\n                    // SCO set by parameter, get it from TOC.\n                    this.currentSco = this.scormHelper.getScoFromToc(this.toc, this.initialScoId);\n                }\n\n                if (!this.currentSco) {\n                    // No SCO defined. Get the first valid one.\n                    return this.scormHelper.getFirstSco(this.scorm.id, this.attempt, this.toc, this.organizationId, this.mode,\n                            this.offline).then((sco) => {\n\n                        if (sco) {\n                            this.currentSco = sco;\n                        } else {\n                            // We couldn't find a SCO to load: they're all inactive or without launch URL.\n                            this.errorMessage = 'addon.mod_scorm.errornovalidsco';\n                        }\n                    });\n                }\n            }\n        }).finally(() => {\n            this.loadingToc = false;\n        });\n    }\n\n    /**\n     * Page will leave.\n     */\n    ionViewWillUnload(): void {\n        // Empty src when leaving the state so unload event is triggered in the iframe.\n        this.src = '';\n    }\n\n    /**\n     * Load a SCO.\n     *\n     * @param sco The SCO to load.\n     */\n    protected loadSco(sco: any): void {\n        if (!this.dataModel) {\n            // Create the model.\n            this.dataModel = new AddonModScormDataModel12(this.eventsProvider, this.scormProvider, this.siteId, this.scorm, sco.id,\n                    this.attempt, this.userData, this.mode, this.offline);\n\n            // Add the model to the window so the SCORM can access it.\n            (<any> window).API = this.dataModel;\n        } else {\n            // Load the SCO in the existing model.\n            this.dataModel.loadSco(sco.id);\n        }\n\n        this.currentSco = sco;\n        this.title = sco.title || this.scorm.name; // Try to use SCO title.\n\n        this.calculateNextAndPreviousSco(sco.id);\n\n        // Load the SCO source.\n        this.scormProvider.getScoSrc(this.scorm, sco).then((src) => {\n            if (src == this.src) {\n                // Re-loading same page. Set it to empty and then re-set the src in the next digest so it detects it has changed.\n                this.src = '';\n\n                setTimeout(() => {\n                    this.src = src;\n                });\n            } else {\n                this.src = src;\n            }\n        });\n\n        if (sco.scormtype == 'asset') {\n            // Mark the asset as completed.\n            const tracks = [{\n                element: 'cmi.core.lesson_status',\n                value: 'completed'\n            }];\n\n            this.scormProvider.saveTracks(sco.id, this.attempt, tracks, this.scorm, this.offline).catch(() => {\n                // Error saving data. We'll go offline if we're online and the asset is not marked as completed already.\n                if (!this.offline) {\n                    return this.scormProvider.getScormUserData(this.scorm.id, this.attempt, undefined, false).then((data) => {\n                        if (!data[sco.id] || data[sco.id].userdata['cmi.core.lesson_status'] != 'completed') {\n                            // Go offline.\n                            return this.scormHelper.convertAttemptToOffline(this.scorm, this.attempt).then(() => {\n                                this.offline = true;\n                                this.dataModel.setOffline(true);\n\n                                return this.scormProvider.saveTracks(sco.id, this.attempt, tracks, this.scorm, true);\n                            }).catch((error) => {\n                                this.domUtils.showErrorModalDefault(error, 'core.error', true);\n                            });\n                        }\n                    });\n                }\n            }).then(() => {\n                // Refresh TOC, some prerequisites might have changed.\n                this.refreshToc();\n            });\n        }\n\n        // Trigger SCO launch event.\n        this.scormProvider.logLaunchSco(this.scorm.id, sco.id, this.scorm.name).catch(() => {\n            // Ignore errors.\n        });\n    }\n\n    /**\n     * Show the TOC.\n     *\n     * @param event Event.\n     */\n    openToc(event: MouseEvent): void {\n        const modal = this.modalCtrl.create('AddonModScormTocPage', {\n            toc: this.toc,\n            attemptToContinue: this.attemptToContinue,\n            mode: this.mode,\n            selected: this.currentSco && this.currentSco.id,\n            moduleId: this.scorm.coursemodule,\n            courseId: this.scorm.course,\n            accessInfo: this.accessInfo\n        }, { cssClass: 'core-modal-lateral',\n            showBackdrop: true,\n            enableBackdropDismiss: true,\n            enterAnimation: 'core-modal-lateral-transition',\n            leaveAnimation: 'core-modal-lateral-transition' });\n\n        // If the modal sends back a SCO, load it.\n        modal.onDidDismiss((sco) => {\n            if (sco) {\n                this.loadSco(sco);\n            }\n        });\n\n        modal.present({\n            ev: event\n        });\n    }\n\n    /**\n     * Refresh the TOC.\n     *\n     * @return Promise resolved when done.\n     */\n    protected refreshToc(): Promise<any> {\n        return this.scormProvider.invalidateAllScormData(this.scorm.id).catch(() => {\n            // Ignore errors.\n        }).then(() => {\n            return this.fetchToc();\n        }).catch((error) => {\n            this.domUtils.showErrorModalDefault(error, 'addon.mod_scorm.errorgetscorm', true);\n        });\n    }\n\n    /**\n     * Set SCORM start time.\n     *\n     * @param scoId SCO ID.\n     * @return Promise resolved when done.\n     */\n    protected setStartTime(scoId: number): Promise<any> {\n        const tracks = [{\n            element: 'x.start.time',\n            value: this.timeUtils.timestamp()\n        }];\n\n        return this.scormProvider.saveTracks(scoId, this.attempt, tracks, this.scorm, this.offline).then(() => {\n            if (!this.offline) {\n                // New online attempt created, update cached data about online attempts.\n                this.scormProvider.getAttemptCount(this.scorm.id, false, true).catch(() => {\n                    // Ignore errors.\n                });\n            }\n        });\n    }\n\n    /**\n     * Component being destroyed.\n     */\n    ngOnDestroy(): void {\n        // Stop listening for events.\n        this.tocObserver && this.tocObserver.off();\n        this.launchNextObserver && this.launchNextObserver.off();\n        this.launchPrevObserver && this.launchPrevObserver.off();\n        setTimeout(() => {\n            this.goOfflineObserver && this.goOfflineObserver.off();\n        }, 500);\n\n        // Unblock the SCORM so it can be synced.\n        this.syncProvider.unblockOperation(AddonModScormProvider.COMPONENT, this.scorm.id, 'player');\n        this.tabs.changeVisibility(true);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/scorm/pages/player/player.ts","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CoreComponentsModule } from '@components/components.module';\nimport { CoreDirectivesModule } from '@directives/directives.module';\nimport { AddonModScormPlayerPage } from './player';\n\n@NgModule({\n    declarations: [\n        AddonModScormPlayerPage,\n    ],\n    imports: [\n        CoreComponentsModule,\n        CoreDirectivesModule,\n        IonicPageModule.forChild(AddonModScormPlayerPage),\n        TranslateModule.forChild()\n    ],\n})\nexport class AddonModScormPlayerPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/scorm/pages/player/player.module.ts","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./player.module\";\nimport * as i2 from \"../../../../../../node_modules/ionic-angular/components/action-sheet/action-sheet-component.ngfactory\";\nimport * as i3 from \"../../../../../../node_modules/ionic-angular/components/alert/alert-component.ngfactory\";\nimport * as i4 from \"../../../../../../node_modules/ionic-angular/components/app/app-root.ngfactory\";\nimport * as i5 from \"../../../../../../node_modules/ionic-angular/components/loading/loading-component.ngfactory\";\nimport * as i6 from \"../../../../../../node_modules/ionic-angular/components/modal/modal-component.ngfactory\";\nimport * as i7 from \"../../../../../../node_modules/ionic-angular/components/picker/picker-component.ngfactory\";\nimport * as i8 from \"../../../../../../node_modules/ionic-angular/components/popover/popover-component.ngfactory\";\nimport * as i9 from \"../../../../../../node_modules/ionic-angular/components/select/select-popover-component.ngfactory\";\nimport * as i10 from \"../../../../../../node_modules/ionic-angular/components/toast/toast-component.ngfactory\";\nimport * as i11 from \"../../../../../components/context-menu/context-menu-popover.ngfactory\";\nimport * as i12 from \"../../../../../components/course-picker-menu/course-picker-menu-popover.ngfactory\";\nimport * as i13 from \"../../../../../components/recaptcha/recaptchamodal.ngfactory\";\nimport * as i14 from \"../../../../../components/bs-tooltip/bs-tooltip.ngfactory\";\nimport * as i15 from \"./player.ngfactory\";\nimport * as i16 from \"@angular/common\";\nimport * as i17 from \"@angular/forms\";\nimport * as i18 from \"@ngx-translate/core/src/translate.loader\";\nimport * as i19 from \"@ngx-translate/core/src/translate.compiler\";\nimport * as i20 from \"@ngx-translate/core/src/translate.parser\";\nimport * as i21 from \"@ngx-translate/core/src/missing-translation-handler\";\nimport * as i22 from \"@ngx-translate/core/src/translate.service\";\nimport * as i23 from \"@ngx-translate/core/src/translate.store\";\nimport * as i24 from \"ionic-angular/module\";\nimport * as i25 from \"@ngx-translate/core/index\";\nimport * as i26 from \"../../../../../directives/directives.module\";\nimport * as i27 from \"../../../../../pipes/pipes.module\";\nimport * as i28 from \"../../../../../components/components.module\";\nimport * as i29 from \"ionic-angular/util/module-loader\";\nimport * as i30 from \"./player\";\nvar AddonModScormPlayerPageModuleNgFactory = i0.ɵcmf(i1.AddonModScormPlayerPageModule, [], function (_l) { return i0.ɵmod([i0.ɵmpd(512, i0.ComponentFactoryResolver, i0.ɵCodegenComponentFactoryResolver, [[8, [i2.ActionSheetCmpNgFactory, i3.AlertCmpNgFactory, i4.IonicAppNgFactory, i5.LoadingCmpNgFactory, i6.ModalCmpNgFactory, i7.PickerCmpNgFactory, i8.PopoverCmpNgFactory, i9.SelectPopoverNgFactory, i10.ToastCmpNgFactory, i11.CoreContextMenuPopoverComponentNgFactory, i12.CoreCoursePickerMenuPopoverComponentNgFactory, i13.CoreRecaptchaModalComponentNgFactory, i14.CoreBSTooltipComponentNgFactory, i15.AddonModScormPlayerPageNgFactory]], [3, i0.ComponentFactoryResolver], i0.NgModuleRef]), i0.ɵmpd(4608, i16.NgLocalization, i16.NgLocaleLocalization, [i0.LOCALE_ID, [2, i16.ɵa]]), i0.ɵmpd(4608, i17.ɵi, i17.ɵi, []), i0.ɵmpd(4608, i17.FormBuilder, i17.FormBuilder, []), i0.ɵmpd(4608, i18.TranslateLoader, i18.TranslateFakeLoader, []), i0.ɵmpd(4608, i19.TranslateCompiler, i19.TranslateFakeCompiler, []), i0.ɵmpd(4608, i20.TranslateParser, i20.TranslateDefaultParser, []), i0.ɵmpd(4608, i21.MissingTranslationHandler, i21.FakeMissingTranslationHandler, []), i0.ɵmpd(4608, i22.TranslateService, i22.TranslateService, [i23.TranslateStore, i18.TranslateLoader, i19.TranslateCompiler, i20.TranslateParser, i21.MissingTranslationHandler, i22.USE_DEFAULT_LANG, i22.USE_STORE]), i0.ɵmpd(512, i16.CommonModule, i16.CommonModule, []), i0.ɵmpd(512, i17.ɵba, i17.ɵba, []), i0.ɵmpd(512, i17.FormsModule, i17.FormsModule, []), i0.ɵmpd(512, i17.ReactiveFormsModule, i17.ReactiveFormsModule, []), i0.ɵmpd(512, i24.IonicModule, i24.IonicModule, []), i0.ɵmpd(512, i25.TranslateModule, i25.TranslateModule, []), i0.ɵmpd(512, i26.CoreDirectivesModule, i26.CoreDirectivesModule, []), i0.ɵmpd(512, i27.CorePipesModule, i27.CorePipesModule, []), i0.ɵmpd(512, i28.CoreComponentsModule, i28.CoreComponentsModule, []), i0.ɵmpd(512, i24.IonicPageModule, i24.IonicPageModule, []), i0.ɵmpd(512, i1.AddonModScormPlayerPageModule, i1.AddonModScormPlayerPageModule, []), i0.ɵmpd(256, i22.USE_STORE, undefined, []), i0.ɵmpd(256, i22.USE_DEFAULT_LANG, undefined, []), i0.ɵmpd(256, i29.LAZY_LOADED_TOKEN, i30.AddonModScormPlayerPage, [])]); });\nexport { AddonModScormPlayerPageModuleNgFactory as AddonModScormPlayerPageModuleNgFactory };\n//# sourceMappingURL=player.module.ngfactory.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/addon/mod/scorm/pages/player/player.module.ngfactory.js\n// module id = null\n// module chunks = "]}