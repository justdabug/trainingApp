webpackJsonp([125],{2002:function(n,l,i){"use strict";function View_AddonModAssignSubmissionListPage_1(n){return s._57(0,[(n()(),s._31(0,0,null,null,3,"core-empty-box",[["icon","paper"]],null,null,null,D.b,D.a)),s._30(1,49152,null,0,j.a,[],{message:[0,"message"],icon:[1,"icon"]},null),s._47(131072,$.a,[R.a,s.j]),(n()(),s._55(-1,0,["\n            "]))],function(n,l){n(l,1,0,s._56(l,1,0,s._44(l,2).transform("addon.mod_assign.submissionstatus_")),"paper")},null)}function View_AddonModAssignSubmissionListPage_3(n){return s._57(0,[(n()(),s._31(0,0,null,null,3,"ion-label",[["id","addon-assign-groupslabel"]],null,null,null,null,null)),s._30(1,16384,[[3,4]],0,T.a,[E.a,s.t,s.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(n()(),s._55(2,null,["",""])),s._47(131072,$.a,[R.a,s.j])],function(n,l){n(l,1,0,"addon-assign-groupslabel")},function(n,l){n(l,2,0,s._56(l,2,0,s._44(l,3).transform("core.groupsseparate")))})}function View_AddonModAssignSubmissionListPage_4(n){return s._57(0,[(n()(),s._31(0,0,null,null,3,"ion-label",[["id","addon-assign-groupslabel"]],null,null,null,null,null)),s._30(1,16384,[[3,4]],0,T.a,[E.a,s.t,s.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(n()(),s._55(2,null,["",""])),s._47(131072,$.a,[R.a,s.j])],function(n,l){n(l,1,0,"addon-assign-groupslabel")},function(n,l){n(l,2,0,s._56(l,2,0,s._44(l,3).transform("core.groupsvisible")))})}function View_AddonModAssignSubmissionListPage_5(n){return s._57(0,[(n()(),s._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),s._30(1,16384,[[6,4]],0,U.a,[s.t],{value:[0,"value"]},null),(n()(),s._55(2,null,["",""]))],function(n,l){n(l,1,0,l.context.$implicit.id)},function(n,l){n(l,2,0,l.context.$implicit.name)})}function View_AddonModAssignSubmissionListPage_2(n){return s._57(0,[(n()(),s._31(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,N.b,N.a)),s._30(1,1097728,null,3,F.a,[B.a,E.a,s.t,s.V,[2,H.a]],null,null),s._52(603979776,3,{contentLabel:0}),s._52(603979776,4,{_buttons:1}),s._52(603979776,5,{_icons:1}),s._30(5,16384,null,0,q.a,[],null,null),(n()(),s._55(-1,2,["\n                    "])),(n()(),s._26(16777216,null,1,1,null,View_AddonModAssignSubmissionListPage_3)),s._30(8,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,2,["\n                    "])),(n()(),s._26(16777216,null,1,1,null,View_AddonModAssignSubmissionListPage_4)),s._30(11,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,2,["\n                    "])),(n()(),s._31(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-assign-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(n,l,i){var t=!0,u=n.component;if("click"===l){t=!1!==s._44(n,14)._click(i)&&t}if("keyup.space"===l){t=!1!==s._44(n,14)._keyup()&&t}if("ngModelChange"===l){t=!1!==(u.groupId=i)&&t}if("ionChange"===l){t=!1!==u.setGroup(u.groupId)&&t}return t},K.b,K.a)),s._30(14,1228800,null,1,W.a,[z.a,B.a,E.a,s.t,s.V,[2,F.a],Q.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),s._52(603979776,6,{options:1}),s._50(1024,null,X.l,function(n){return[n]},[W.a]),s._30(17,671744,null,0,X.q,[[8,null],[8,null],[8,null],[2,X.l]],{model:[0,"model"]},{update:"ngModelChange"}),s._50(2048,null,X.m,null,[X.q]),s._30(19,16384,null,0,X.n,[X.m],null,null),(n()(),s._55(-1,null,["\n                        "])),(n()(),s._26(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_5)),s._30(22,802816,null,0,J.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(n()(),s._55(-1,null,["\n                    "])),(n()(),s._55(-1,2,["\n                "]))],function(n,l){var i=l.component;n(l,8,0,i.groupInfo.separateGroups);n(l,11,0,i.groupInfo.visibleGroups);n(l,14,0,"action-sheet");n(l,17,0,i.groupId);n(l,22,0,i.groupInfo.groups)},function(n,l){n(l,13,0,s._44(l,14)._disabled,s._44(l,19).ngClassUntouched,s._44(l,19).ngClassTouched,s._44(l,19).ngClassPristine,s._44(l,19).ngClassDirty,s._44(l,19).ngClassValid,s._44(l,19).ngClassInvalid,s._44(l,19).ngClassPending)})}function View_AddonModAssignSubmissionListPage_7(n){return s._57(0,[(n()(),s._31(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),s._55(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.userfullname)})}function View_AddonModAssignSubmissionListPage_8(n){return s._57(0,[(n()(),s._31(0,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),s._55(1,null,["","",""])),s._47(131072,$.a,[R.a,s.j])],null,function(n,l){n(l,1,0,s._56(l,1,0,s._44(l,2).transform("addon.mod_assign.hiddenuser")),l.parent.context.$implicit.blindid)})}function View_AddonModAssignSubmissionListPage_10(n){return s._57(0,[(n()(),s._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),s._55(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.$implicit.groupname)})}function View_AddonModAssignSubmissionListPage_11(n){return s._57(0,[(n()(),s._31(0,0,null,null,2,"span",[["class","text-danger"]],null,null,null,null,null)),(n()(),s._55(1,null,["",""])),s._47(131072,$.a,[R.a,s.j])],null,function(n,l){n(l,1,0,s._56(l,1,0,s._44(l,2).transform("addon.mod_assign.noteam")))})}function View_AddonModAssignSubmissionListPage_12(n){return s._57(0,[(n()(),s._31(0,0,null,null,2,"span",[["class","text-danger"]],null,null,null,null,null)),(n()(),s._55(1,null,["",""])),s._47(131072,$.a,[R.a,s.j])],null,function(n,l){n(l,1,0,s._56(l,1,0,s._44(l,2).transform("addon.mod_assign.multipleteams")))})}function View_AddonModAssignSubmissionListPage_13(n){return s._57(0,[(n()(),s._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),s._55(1,null,["",""])),s._47(131072,$.a,[R.a,s.j])],null,function(n,l){n(l,1,0,s._56(l,1,0,s._44(l,2).transform("addon.mod_assign.defaultteam")))})}function View_AddonModAssignSubmissionListPage_9(n){return s._57(0,[(n()(),s._31(0,0,null,null,13,"p",[],null,null,null,null,null)),(n()(),s._55(-1,null,["\n                            "])),(n()(),s._26(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_10)),s._30(3,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,null,["\n                            "])),(n()(),s._26(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_11)),s._30(6,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,null,["\n                            "])),(n()(),s._26(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_12)),s._30(9,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,null,["\n                            "])),(n()(),s._26(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_13)),s._30(12,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,null,["\n                        "]))],function(n,l){var i=l.component;n(l,3,0,l.parent.context.$implicit.groupname);n(l,6,0,i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.noGroups&&!l.parent.context.$implicit.blindid);n(l,9,0,i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,12,0,!i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname)},null)}function View_AddonModAssignSubmissionListPage_14(n){return s._57(0,[(n()(),s._31(0,0,null,null,2,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),s._30(1,16384,null,0,Y.a,[E.a,s.t,s.V],{color:[0,"color"]},null),(n()(),s._55(2,null,["\n                            ","\n                        "]))],function(n,l){n(l,1,0,l.parent.context.$implicit.statusColor)},function(n,l){n(l,2,0,l.parent.context.$implicit.statusTranslated)})}function View_AddonModAssignSubmissionListPage_15(n){return s._57(0,[(n()(),s._31(0,0,null,null,3,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),s._30(1,16384,null,0,Y.a,[E.a,s.t,s.V],{color:[0,"color"]},null),(n()(),s._55(2,null,["\n                            ","\n                        "])),s._47(131072,$.a,[R.a,s.j])],function(n,l){n(l,1,0,l.parent.context.$implicit.gradingColor)},function(n,l){n(l,2,0,s._56(l,2,0,s._44(l,3).transform(l.parent.context.$implicit.gradingStatusTranslationId)))})}function View_AddonModAssignSubmissionListPage_6(n){return s._57(0,[(n()(),s._31(0,0,null,null,28,null,null,null,null,null,null,null)),(n()(),s._55(-1,null,["\n                    "])),(n()(),s._31(2,0,null,null,25,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,i){var s=!0;if("click"===l){s=!1!==n.component.loadSubmission(n.context.$implicit)&&s}return s},N.b,N.a)),s._30(3,1097728,null,3,F.a,[B.a,E.a,s.t,s.V,[2,H.a]],null,null),s._52(335544320,7,{contentLabel:0}),s._52(603979776,8,{_buttons:1}),s._52(603979776,9,{_icons:1}),s._30(7,16384,null,0,q.a,[],null,null),(n()(),s._55(-1,2,["\n                        "])),(n()(),s._31(9,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,Z.b,Z.a)),s._30(10,770048,null,0,nn.a,[ln.a,r.a,sn.a,tn.a,o.a,[2,f.a]],{user:[0,"user"],linkProfile:[1,"linkProfile"]},null),s._30(11,16384,null,0,un.a,[],null,null),(n()(),s._55(-1,2,["\n                        "])),(n()(),s._26(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_7)),s._30(14,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,2,["\n                        "])),(n()(),s._26(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_8)),s._30(17,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,2,["\n                        "])),(n()(),s._26(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_9)),s._30(20,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,2,["\n                        "])),(n()(),s._26(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_14)),s._30(23,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,2,["\n                        "])),(n()(),s._26(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_15)),s._30(26,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,2,["\n                    "])),(n()(),s._55(-1,null,["\n                "]))],function(n,l){var i=l.component;n(l,10,0,l.context.$implicit,!1);n(l,14,0,l.context.$implicit.userfullname);n(l,17,0,!l.context.$implicit.userfullname);n(l,20,0,i.assign.teamsubmission);n(l,23,0,l.context.$implicit.statusTranslated);n(l,26,0,l.context.$implicit.gradingStatusTranslationId)},function(n,l){n(l,2,0,l.context.$implicit.submitid==l.component.selectedSubmissionId)})}function View_AddonModAssignSubmissionListPage_16(n){return s._57(0,[(n()(),s._31(0,0,null,null,10,"ion-item",[["class","core-warning-card item item-block"],["icon-start",""],["text-wrap",""]],null,null,null,N.b,N.a)),s._30(1,1097728,null,3,F.a,[B.a,E.a,s.t,s.V,[2,H.a]],null,null),s._52(335544320,10,{contentLabel:0}),s._52(603979776,11,{_buttons:1}),s._52(603979776,12,{_icons:1}),s._30(5,16384,null,0,q.a,[],null,null),(n()(),s._55(-1,2,["\n                    "])),(n()(),s._31(7,0,null,2,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._30(8,147456,[[12,4]],0,en.a,[E.a,s.t,s.V],{name:[0,"name"]},null),(n()(),s._55(9,2,["\n                    ","\n                "])),s._47(131072,$.a,[R.a,s.j])],function(n,l){n(l,8,0,"warning")},function(n,l){n(l,7,0,s._44(l,8)._hidden);n(l,9,0,s._56(l,9,0,s._44(l,10).transform("addon.mod_assign.notallparticipantsareshown")))})}function View_AddonModAssignSubmissionListPage_0(n){return s._57(0,[s._52(402653184,1,{splitviewCtrl:0}),(n()(),s._31(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),s._30(2,16384,null,0,an.a,[E.a,s.t,s.V,[2,on.a]],null,null),(n()(),s._55(-1,null,["\n    "])),(n()(),s._31(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,rn.b,rn.a)),s._30(5,49152,null,0,dn.a,[z.a,[2,on.a],[2,ln.a],E.a,s.t,s.V],null,null),s._30(6,212992,null,0,_n.a,[dn.a,gn.a,R.a,o.a],null,null),(n()(),s._55(-1,3,["\n        "])),(n()(),s._31(8,0,null,3,3,"ion-title",[],null,null,null,cn.b,cn.a)),s._30(9,49152,null,0,mn.a,[E.a,s.t,s.V,[2,fn.a],[2,dn.a]],null,null),(n()(),s._31(10,16777216,null,0,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),s._30(11,540672,null,0,pn.a,[s.t,r.a,d.a,bn.a,R.a,gn.a,sn.a,hn.a,An.a,Pn.a,tn.a,vn.a,[2,ln.a],[2,In.a],[2,f.a],Sn.a,o.a,Mn.a,wn.a,Ln.a,s._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(n()(),s._55(-1,3,["\n\n        "])),(n()(),s._31(13,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),s._30(14,16384,null,1,Vn.a,[E.a,s.t,s.V,[2,fn.a],[2,dn.a]],null,null),s._52(603979776,2,{_buttons:1}),(n()(),s._55(-1,3,["\n    "])),(n()(),s._55(-1,null,["\n"])),(n()(),s._55(-1,null,["\n"])),(n()(),s._31(19,0,null,null,35,"core-split-view",[],null,null,null,xn.b,xn.a)),s._30(20,245760,[[1,4]],0,f.a,[[2,ln.a],s.t,yn.a,gn.a,R.a],null,null),(n()(),s._55(-1,0,["\n    "])),(n()(),s._31(22,0,null,0,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Cn.b,Cn.a)),s._30(23,4374528,null,0,In.a,[E.a,gn.a,kn.a,s.t,s.V,z.a,Gn.a,s.M,[2,on.a],[2,ln.a]],null,null),(n()(),s._55(-1,1,["\n        "])),(n()(),s._31(25,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,i){var s=!0;if("ionRefresh"===l){s=!1!==n.component.refreshList(i)&&s}return s},null,null)),s._30(26,212992,null,0,On.a,[gn.a,In.a,s.M,Dn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),s._55(-1,null,["\n            "])),(n()(),s._31(28,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,jn.b,jn.a)),s._30(29,114688,null,0,$n.a,[On.a,E.a],{pullingText:[0,"pullingText"]},null),s._47(131072,$.a,[R.a,s.j]),(n()(),s._55(-1,null,["\n        "])),(n()(),s._55(-1,1,["\n        "])),(n()(),s._31(33,0,null,1,19,"core-loading",[],null,null,null,Rn.b,Rn.a)),s._30(34,638976,null,0,Tn.a,[R.a,s.t,o.a,sn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),s._55(-1,0,["\n            "])),(n()(),s._26(16777216,null,0,1,null,View_AddonModAssignSubmissionListPage_1)),s._30(37,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,0,["\n\n            "])),(n()(),s._31(39,0,null,0,12,"ion-list",[],null,null,null,null,null)),s._30(40,16384,null,0,En.a,[E.a,s.t,s.V,gn.a,Dn.l,kn.a],null,null),(n()(),s._55(-1,null,["\n                "])),(n()(),s._26(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_2)),s._30(43,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,null,["\n                "])),(n()(),s._55(-1,null,["\n                "])),(n()(),s._26(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_6)),s._30(47,802816,null,0,J.j,[s._11,s._6,s.E],{ngForOf:[0,"ngForOf"]},null),(n()(),s._55(-1,null,["\n\n                "])),(n()(),s._26(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_16)),s._30(50,16384,null,0,J.k,[s._11,s._6],{ngIf:[0,"ngIf"]},null),(n()(),s._55(-1,null,["\n            "])),(n()(),s._55(-1,0,["\n        "])),(n()(),s._55(-1,1,["\n    "])),(n()(),s._55(-1,0,["\n"])),(n()(),s._55(-1,null,["\n"]))],function(n,l){var i=l.component;n(l,6,0);n(l,11,0,i.title,"module",i.moduleId,i.courseId),n(l,20,0);n(l,26,0,i.loaded);n(l,29,0,s._34(1,"",s._56(l,29,0,s._44(l,30).transform("core.pulltorefresh")),""));n(l,34,0,i.loaded);n(l,37,0,!i.submissions||0==i.submissions.length);n(l,43,0,i.groupInfo.separateGroups||i.groupInfo.visibleGroups);n(l,47,0,i.submissions);n(l,50,0,!i.haveAllParticipants)},function(n,l){n(l,4,0,s._44(l,5)._hidden,s._44(l,5)._sbPadding);n(l,22,0,s._44(l,23).statusbarPadding,s._44(l,23)._hasRefresher);n(l,25,0,"inactive"!==s._44(l,26).state,s._44(l,26)._top);n(l,28,0,s._44(l,29).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var s=i(0),t=i(5),u=i(3),e=i(26),a=i(32),o=i(9),r=i(1),d=i(4),_=i(71),g=i(77),c=i(133),m=i(183),f=i(28),p=this&&this.__decorate||function(n,l,i,s){var t,u=arguments.length,e=u<3?l:null===s?s=Object.getOwnPropertyDescriptor(l,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(n,l,i,s);else for(var a=n.length-1;a>=0;a--)(t=n[a])&&(e=(u<3?t(e):u>3?t(l,i,e):t(l,i))||e);return u>3&&e&&Object.defineProperty(l,i,e),e},b=this&&this.__metadata||function(n,l){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,l)},h=function(){function AddonModAssignSubmissionListPage(n,l,i,s,t,u,e,a,o){var r=this;this.sitesProvider=l,this.domUtils=s,this.translate=t,this.assignProvider=u,this.assignOfflineProvider=e,this.assignHelper=a,this.groupsProvider=o,this.groupId=0,this.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},this.moduleId=n.get("moduleId"),this.courseId=n.get("courseId"),this.groupId=n.get("groupId"),this.selectedStatus=n.get("status"),this.title=this.translate.instant(this.selectedStatus?this.selectedStatus==g.a.NEED_GRADING?"addon.mod_assign.numberofsubmissionsneedgrading":"addon.mod_assign.submissionstatus_"+this.selectedStatus:"addon.mod_assign.numberofparticipants"),this.gradedObserver=i.on(g.a.GRADED_EVENT,function(n){r.assign&&n.assignmentId==r.assign.id&&n.userId==l.getCurrentSiteUserId()&&(r.loaded=!1,r.refreshAllData().finally(function(){r.loaded=!0}))},l.getCurrentSiteId())}return AddonModAssignSubmissionListPage.prototype.ngOnInit=function(){var n=this;this.fetchAssignment().finally(function(){!n.selectedSubmissionId&&n.splitviewCtrl.isOn()&&n.submissions.length>0&&n.loadSubmission(n.submissions[0]),n.loaded=!0})},AddonModAssignSubmissionListPage.prototype.fetchAssignment=function(){var n=this;return this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(l){return n.title=l.name||n.title,n.assign=l,n.assignProvider.getSubmissions(l.id)}).then(function(l){return l.canviewsubmissions?(n.submissionsData=l,n.groupsProvider.getActivityGroupInfo(n.assign.cmid,!1).then(function(l){return n.groupInfo=l,n.setGroup(n.groupsProvider.validateGroupId(n.groupId,l))})):Promise.reject(null)}).catch(function(l){n.domUtils.showErrorModalDefault(l,"Error getting assigment data.")})},AddonModAssignSubmissionListPage.prototype.setGroup=function(n){var l=this;if(this.groupId=n,this.haveAllParticipants=!0,!this.sitesProvider.getCurrentSite().wsAvailable("mod_assign_list_participants"))return this.haveAllParticipants=!1,this.submissions=[],Promise.resolve();var i=[this.assignHelper.getSubmissionsUserData(this.assign,this.submissionsData.submissions,this.groupId),this.assign.markingworkflow?Promise.resolve(null):this.assignProvider.getAssignmentGrades(this.assign.id)];return Promise.all(i).then(function(n){var i=n[1],s=l.selectedStatus==g.a.NEED_GRADING,t=s?g.a.SUBMISSION_STATUS_SUBMITTED:l.selectedStatus,u=[],e=[];return n[0].forEach(function(n){t&&t!=n.status||u.push(l.assignOfflineProvider.getSubmissionGrade(l.assign.id,n.userid).catch(function(){}).then(function(t){var u=!1;return t&&n.timemodified<t.timemodified&&(u=!0),(s?l.assignProvider.needsSubmissionToBeGraded(n,l.assign.id):Promise.resolve(!0)).then(function(s){if(s){if("graded"==n.gradingstatus&&!l.assign.markingworkflow){var t=i.filter(function(l){return l.userid==n.userid}).reduce(function(n,l){return n.timemodified>l.timemodified?n:l});t&&t.timemodified<n.timemodified&&(n.gradingstatus=g.a.GRADED_FOLLOWUP_SUBMIT)}n.statusColor=l.assignProvider.getSubmissionStatusColor(n.status),n.gradingColor=l.assignProvider.getSubmissionGradingStatusColor(n.gradingstatus),n.statusTranslated="success"==n.statusColor&&n.gradingstatus?"":l.translate.instant("addon.mod_assign.submissionstatus_"+n.status),u?(n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor=""):n.gradingStatusTranslationId="danger"!=n.statusColor||"danger"!=n.gradingColor?l.assignProvider.getSubmissionGradingStatusTranslationId(n.gradingstatus):"",e.push(n)}})}))}),Promise.all(u).then(function(){l.submissions=e})})},AddonModAssignSubmissionListPage.prototype.loadSubmission=function(n){this.selectedSubmissionId===n.submitid&&this.splitviewCtrl.isOn()||(this.selectedSubmissionId=n.submitid,this.splitviewCtrl.push("AddonModAssignSubmissionReviewPage",{courseId:this.courseId,moduleId:this.moduleId,submitId:n.submitid,blindId:n.blindid}))},AddonModAssignSubmissionListPage.prototype.refreshAllData=function(){var n=this,l=[];return l.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(l.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentGradesData(this.assign.id)),l.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),Promise.all(l).finally(function(){return n.fetchAssignment()})},AddonModAssignSubmissionListPage.prototype.refreshList=function(n){this.refreshAllData().finally(function(){n.complete()})},AddonModAssignSubmissionListPage.prototype.ngOnDestroy=function(){this.gradedObserver&&this.gradedObserver.off()},p([Object(s._9)(f.a),b("design:type",f.a)],AddonModAssignSubmissionListPage.prototype,"splitviewCtrl",void 0),AddonModAssignSubmissionListPage=p([Object(s.m)({selector:"page-addon-mod-assign-submission-list",templateUrl:"submission-list.html"}),b("design:paramtypes",[t.t,r.a,o.a,d.a,u.c,g.a,c.a,m.a,_.a])],AddonModAssignSubmissionListPage)}(),A=this&&this.__decorate||function(n,l,i,s){var t,u=arguments.length,e=u<3?l:null===s?s=Object.getOwnPropertyDescriptor(l,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(n,l,i,s);else for(var a=n.length-1;a>=0;a--)(t=n[a])&&(e=(u<3?t(e):u>3?t(l,i,e):t(l,i))||e);return u>3&&e&&Object.defineProperty(l,i,e),e},P=function(){function AddonModAssignSubmissionListPageModule(){}return AddonModAssignSubmissionListPageModule=A([Object(s.I)({declarations:[h],imports:[e.a,a.a,t.l.forChild(h),u.b.forChild()]})],AddonModAssignSubmissionListPageModule)}(),v=i(1522),I=i(1523),S=i(1524),M=i(1525),w=i(1526),L=i(1527),V=i(1528),x=i(1529),y=i(1530),C=i(1531),k=i(1532),G=i(1533),O=i(1534),D=i(124),j=i(114),$=i(25),R=i(18),T=i(67),E=i(8),U=i(108),N=i(31),F=i(21),B=i(19),H=i(27),q=i(33),J=i(7),K=i(123),W=i(109),z=i(35),Q=i(59),X=i(23),Y=i(143),Z=i(214),nn=i(182),ln=i(20),sn=i(2),tn=i(10),un=i(160),en=i(48),an=i(371),on=i(39),rn=i(723),dn=i(212),_n=i(473),gn=i(16),cn=i(724),mn=i(314),fn=i(247),pn=i(47),bn=i(11),hn=i(22),An=i(6),Pn=i(17),vn=i(15),In=i(29),Sn=i(42),Mn=i(40),wn=i(30),Ln=i(36),Vn=i(372),xn=i(474),yn=i(72),Cn=i(181),kn=i(34),Gn=i(107),On=i(159),Dn=i(44),jn=i(213),$n=i(173),Rn=i(54),Tn=i(51),En=i(86),Un=i(69),Nn=s._29({encapsulation:2,styles:[],data:{}}),Fn=s._27("page-addon-mod-assign-submission-list",h,function View_AddonModAssignSubmissionListPage_Host_0(n){return s._57(0,[(n()(),s._31(0,0,null,null,1,"page-addon-mod-assign-submission-list",[],null,null,null,View_AddonModAssignSubmissionListPage_0,Nn)),s._30(1,245760,null,0,h,[Un.a,r.a,o.a,d.a,R.a,g.a,c.a,m.a,_.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Bn=i(367),Hn=i(368),qn=i(370),Jn=i(369),Kn=i(472),Wn=i(722),zn=i(106),Qn=i(270);i.d(l,"AddonModAssignSubmissionListPageModuleNgFactory",function(){return Xn});var Xn=s._28(P,[],function(n){return s._40([s._41(512,s.o,s._21,[[8,[v.a,I.a,S.a,M.a,w.a,L.a,V.a,x.a,y.a,C.a,k.a,G.a,O.a,Fn]],[3,s.o],s.K]),s._41(4608,J.m,J.l,[s.G,[2,J.w]]),s._41(4608,X.x,X.x,[]),s._41(4608,X.d,X.d,[]),s._41(4608,Bn.b,Bn.a,[]),s._41(4608,Hn.a,Hn.b,[]),s._41(4608,qn.b,qn.a,[]),s._41(4608,Jn.b,Jn.a,[]),s._41(4608,R.a,R.a,[Kn.a,Bn.b,Hn.a,qn.b,Jn.b,R.b,R.c]),s._41(512,J.b,J.b,[]),s._41(512,X.v,X.v,[]),s._41(512,X.i,X.i,[]),s._41(512,X.s,X.s,[]),s._41(512,Wn.a,Wn.a,[]),s._41(512,u.b,u.b,[]),s._41(512,a.a,a.a,[]),s._41(512,zn.a,zn.a,[]),s._41(512,e.a,e.a,[]),s._41(512,Wn.b,Wn.b,[]),s._41(512,P,P,[]),s._41(256,R.c,void 0,[]),s._41(256,R.b,void 0,[]),s._41(256,Qn.a,h,[])])})}});