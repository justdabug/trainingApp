webpackJsonp([40],{2104:function(n,e,l){"use strict";function View_CoreSettingsSpaceUsagePage_2(n){return t._57(0,[(n()(),t._31(0,0,null,null,2,"p",[["text-end",""]],null,null,null,null,null)),(n()(),t._55(1,null,["",""])),t._49(2,1)],null,function(n,e){n(e,1,0,t._56(e,1,0,n(e,2,0,t._44(e.parent.parent,0),e.parent.context.$implicit.spaceUsage)))})}function View_CoreSettingsSpaceUsagePage_3(n){return t._57(0,[(n()(),t._31(0,0,null,null,3,"p",[["text-end",""]],null,null,null,null,null)),(n()(),t._55(1,null,["",""])),t._48(2,{$a:0}),t._47(131072,R.a,[$.a,t.j])],null,function(n,e){n(e,1,0,t._56(e,1,0,t._44(e,3).transform("core.settings.entriesincache",n(e,2,0,e.parent.context.$implicit.cacheEntries))))})}function View_CoreSettingsSpaceUsagePage_1(n){return t._57(0,[(n()(),t._31(0,0,null,null,30,"ion-item",[["class","item item-block"]],[[2,"core-primary-selected-item",null]],null,null,O.b,O.a)),t._30(1,1097728,null,3,D.a,[M.a,H.a,t.t,t.V,[2,N.a]],null,null),t._52(335544320,3,{contentLabel:0}),t._52(603979776,4,{_buttons:1}),t._52(603979776,5,{_icons:1}),t._30(5,16384,null,0,F.a,[],null,null),(n()(),t._55(-1,2,["\n            "])),(n()(),t._31(7,0,null,2,2,"h2",[["text-wrap",""]],null,null,null,null,null)),(n()(),t._31(8,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),t._30(9,540672,null,0,L.a,[t.t,i.a,r.a,T.a,$.a,G.a,A.a,J.a,K.a,q.a,z.a,B.a,[2,Q.a],[2,W.a],[2,X.a],Y.a,Z.a,nn.a,en.a,ln.a,t._11],{text:[0,"text"],siteId:[1,"siteId"],clean:[2,"clean"]},null),(n()(),t._55(-1,2,["\n            "])),(n()(),t._31(11,0,null,2,1,"p",[["text-wrap",""]],null,null,null,null,null)),(n()(),t._55(12,null,["",""])),(n()(),t._55(-1,2,["\n            "])),(n()(),t._31(14,0,null,4,7,"div",[["item-end",""]],null,null,null,null,null)),(n()(),t._55(-1,null,["\n                "])),(n()(),t._26(16777216,null,null,1,null,View_CoreSettingsSpaceUsagePage_2)),t._30(17,16384,null,0,tn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,null,["\n                "])),(n()(),t._26(16777216,null,null,1,null,View_CoreSettingsSpaceUsagePage_3)),t._30(20,16384,null,0,tn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,null,["\n            "])),(n()(),t._55(-1,2,["\n            "])),(n()(),t._31(23,0,null,4,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(n,e,l){var t=!0;if("click"===e){t=!1!==n.component.deleteSiteStorage(n.context.$implicit)&&t}return t},an.b,an.a)),t._30(24,1097728,[[4,4]],0,un.a,[[8,""],H.a,t.t,t.V],{color:[0,"color"],clear:[1,"clear"]},null),t._47(131072,R.a,[$.a,t.j]),(n()(),t._55(-1,0,["\n                "])),(n()(),t._31(27,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(28,147456,null,0,rn.a,[H.a,t.t,t.V],{name:[0,"name"]},null),(n()(),t._55(-1,0,["\n            "])),(n()(),t._55(-1,2,["\n        "]))],function(n,e){n(e,9,0,e.context.$implicit.siteName,e.context.$implicit.id,"true");n(e,17,0,null!=e.context.$implicit.spaceUsage);n(e,20,0,null!=e.context.$implicit.cacheEntries);n(e,24,0,"danger","");n(e,28,0,"trash")},function(n,e){n(e,0,0,e.context.$implicit.id==e.component.currentSiteId);n(e,12,0,e.context.$implicit.fullName);n(e,23,0,!e.context.$implicit.spaceUsage>"0"&&!e.context.$implicit.cacheEntries>"0",t._56(e,23,1,t._44(e,25).transform("core.settings.deletesitefilestitle")));n(e,27,0,t._44(e,28)._hidden)})}function View_CoreSettingsSpaceUsagePage_4(n){return t._57(0,[(n()(),t._31(0,0,null,null,22,"ion-item-divider",[["class","item item-divider"]],null,null,null,O.b,O.a)),t._30(1,1097728,null,3,D.a,[M.a,H.a,t.t,t.V,[2,N.a]],null,null),t._52(335544320,6,{contentLabel:0}),t._52(603979776,7,{_buttons:1}),t._52(603979776,8,{_icons:1}),t._30(5,16384,null,0,sn.a,[H.a,t.t,t.V],null,null),(n()(),t._55(-1,2,["\n            "])),(n()(),t._31(7,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),t._55(8,null,["",""])),t._47(131072,R.a,[$.a,t.j]),(n()(),t._55(-1,2,["\n            "])),(n()(),t._31(11,0,null,4,10,"div",[["item-end",""]],null,null,null,null,null)),(n()(),t._55(-1,null,["\n                "])),(n()(),t._31(13,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),t._55(14,null,["",""])),t._49(15,1),(n()(),t._55(-1,null,["\n                "])),(n()(),t._31(17,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),t._55(18,null,["",""])),t._48(19,{$a:0}),t._47(131072,R.a,[$.a,t.j]),(n()(),t._55(-1,null,["\n            "])),(n()(),t._55(-1,2,["\n        "]))],null,function(n,e){var l=e.component;n(e,8,0,t._56(e,8,0,t._44(e,9).transform("core.settings.total")));n(e,14,0,t._56(e,14,0,n(e,15,0,t._44(e.parent,0),l.totals.spaceUsage)));n(e,18,0,t._56(e,18,0,t._44(e,20).transform("core.settings.entriesincache",n(e,19,0,l.totals.cacheEntries))))})}function View_CoreSettingsSpaceUsagePage_0(n){return t._57(0,[t._47(0,on.a,[K.a,T.a]),(n()(),t._31(1,0,null,null,17,"ion-header",[],null,null,null,null,null)),t._30(2,16384,null,0,cn.a,[H.a,t.t,t.V,[2,_n.a]],null,null),(n()(),t._55(-1,null,["\n    "])),(n()(),t._31(4,0,null,null,13,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,pn.b,pn.a)),t._30(5,49152,null,0,gn.a,[fn.a,[2,_n.a],[2,Q.a],H.a,t.t,t.V],null,null),t._30(6,212992,null,0,dn.a,[gn.a,G.a,$.a,Z.a],null,null),(n()(),t._55(-1,3,["\n        "])),(n()(),t._31(8,0,null,3,3,"ion-title",[],null,null,null,hn.b,hn.a)),t._30(9,49152,null,0,bn.a,[H.a,t.t,t.V,[2,mn.a],[2,gn.a]],null,null),(n()(),t._55(10,0,["",""])),t._47(131072,R.a,[$.a,t.j]),(n()(),t._55(-1,3,["\n        "])),(n()(),t._31(13,0,null,2,3,"ion-buttons",[["end",""]],null,null,null,null,null)),t._30(14,16384,null,1,Sn.a,[H.a,t.t,t.V,[2,mn.a],[2,gn.a]],null,null),t._52(603979776,1,{_buttons:1}),(n()(),t._55(-1,null,["\n        "])),(n()(),t._55(-1,3,["\n    "])),(n()(),t._55(-1,null,["\n"])),(n()(),t._55(-1,null,["\n"])),(n()(),t._31(20,0,null,null,11,"core-navbar-buttons",[],null,null,null,vn.b,vn.a)),t._30(21,245760,null,1,Un.a,[t.t,K.a,r.a],null,null),t._52(603979776,2,{buttons:1}),(n()(),t._55(-1,0,["\n    "])),(n()(),t._31(24,0,null,0,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,e,l){var t=!0;if("click"===e){t=!1!==n.component.showInfo()&&t}return t},an.b,an.a)),t._30(25,1097728,[[2,4]],0,un.a,[[8,""],H.a,t.t,t.V],null,null),t._47(131072,R.a,[$.a,t.j]),(n()(),t._55(-1,0,["\n        "])),(n()(),t._31(28,0,null,0,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(29,147456,null,0,rn.a,[H.a,t.t,t.V],{name:[0,"name"]},null),(n()(),t._55(-1,0,["\n    "])),(n()(),t._55(-1,0,["\n"])),(n()(),t._55(-1,null,["\n"])),(n()(),t._31(33,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,yn.b,yn.a)),t._30(34,4374528,null,0,W.a,[H.a,G.a,Pn.a,t.t,t.V,fn.a,wn.a,t.M,[2,_n.a],[2,Q.a]],null,null),(n()(),t._55(-1,1,["\n    "])),(n()(),t._31(36,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,e,l){var t=!0;if("ionRefresh"===e){t=!1!==n.component.refreshData(l)&&t}return t},null,null)),t._30(37,212992,null,0,xn.a,[G.a,W.a,t.M,Cn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),t._55(-1,null,["\n        "])),(n()(),t._31(39,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Vn.b,Vn.a)),t._30(40,114688,null,0,jn.a,[xn.a,H.a],{pullingText:[0,"pullingText"]},null),t._47(131072,R.a,[$.a,t.j]),(n()(),t._55(-1,null,["\n    "])),(n()(),t._55(-1,1,["\n    "])),(n()(),t._31(44,0,null,1,8,"core-loading",[],null,null,null,In.b,In.a)),t._30(45,638976,null,0,En.a,[$.a,t.t,Z.a,A.a],{hideUntil:[0,"hideUntil"]},null),(n()(),t._55(-1,0,["\n        "])),(n()(),t._26(16777216,null,0,1,null,View_CoreSettingsSpaceUsagePage_1)),t._30(48,802816,null,0,tn.j,[t._11,t._6,t.E],{ngForOf:[0,"ngForOf"]},null),(n()(),t._55(-1,0,["\n        "])),(n()(),t._26(16777216,null,0,1,null,View_CoreSettingsSpaceUsagePage_4)),t._30(51,16384,null,0,tn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,0,["\n    "])),(n()(),t._55(-1,1,["\n"])),(n()(),t._55(-1,null,["\n"]))],function(n,e){var l=e.component;n(e,6,0),n(e,21,0);n(e,29,0,"information-circle");n(e,37,0,l.loaded);n(e,40,0,t._34(1,"",t._56(e,40,0,t._44(e,41).transform("core.pulltorefresh")),""));n(e,45,0,l.loaded);n(e,48,0,l.sites);n(e,51,0,l.totals)},function(n,e){n(e,4,0,t._44(e,5)._hidden,t._44(e,5)._sbPadding);n(e,10,0,t._56(e,10,0,t._44(e,11).transform("core.settings.spaceusage")));n(e,24,0,t._56(e,24,0,t._44(e,26).transform("core.info")));n(e,28,0,t._44(e,29)._hidden);n(e,33,0,t._44(e,34).statusbarPadding,t._44(e,34)._hasRefresher);n(e,36,0,"inactive"!==t._44(e,37).state,t._44(e,37)._top);n(e,39,0,t._44(e,40).r.state)})}Object.defineProperty(e,"__esModule",{value:!0});var t=l(0),a=l(5),u=l(3),i=l(1),r=l(4),s=l(729),o=this&&this.__decorate||function(n,e,l,t){var a,u=arguments.length,i=u<3?e:null===t?t=Object.getOwnPropertyDescriptor(e,l):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,l,t);else for(var r=n.length-1;r>=0;r--)(a=n[r])&&(i=(u<3?a(i):u>3?a(e,l,i):a(e,l))||i);return u>3&&i&&Object.defineProperty(e,l,i),i},c=this&&this.__metadata||function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},_=this&&this.__awaiter||function(n,e,l,t){return new(l||(l=Promise))(function(a,u){function fulfilled(n){try{step(t.next(n))}catch(n){u(n)}}function rejected(n){try{step(t.throw(n))}catch(n){u(n)}}function step(n){n.done?a(n.value):new l(function(e){e(n.value)}).then(fulfilled,rejected)}step((t=t.apply(n,e||[])).next())})},p=this&&this.__generator||function(n,e){function verb(u){return function(r){return function step(u){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,t&&(a=t[2&u[0]?"return":u[0]?"throw":"next"])&&!(a=a.call(t,u[1])).done)return a;switch(t=0,a&&(u=[0,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,t=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){i.label=u[1];break}if(6===u[0]&&i.label<a[1]){i.label=a[1],a=u;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(u);break}a[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(n,i)}catch(n){u=[6,n],t=0}finally{l=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,r])}}var l,t,a,u,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},g=function(){function CoreSettingsSpaceUsagePage(n,e,l,t){this.sitesProvider=n,this.settingsHelper=e,this.domUtils=l,this.translate=t,this.loaded=!1,this.sites=[],this.currentSiteId="",this.totals={cacheEntries:0,spaceUsage:0},this.currentSiteId=this.sitesProvider.getCurrentSiteId()}return CoreSettingsSpaceUsagePage.prototype.ionViewDidLoad=function(){var n=this;this.loadSiteData().finally(function(){n.loaded=!0})},CoreSettingsSpaceUsagePage.prototype.loadSiteData=function(){return _(this,void 0,void 0,function(){var n,e,l,t=this;return p(this,function(a){switch(a.label){case 0:return n=0,e=0,l=this,[4,this.sitesProvider.getSortedSites()];case 1:return l.sites=a.sent(),[4,Promise.all(this.sites.map(function(l){return _(t,void 0,void 0,function(){var t;return p(this,function(a){switch(a.label){case 0:return[4,this.settingsHelper.getSiteSpaceUsage(l.id)];case 1:return t=a.sent(),l.cacheEntries=t.cacheEntries,l.spaceUsage=t.spaceUsage,n+=l.spaceUsage?parseInt(l.spaceUsage,10):0,e+=l.cacheEntries?parseInt(l.cacheEntries,10):0,[2]}})})}))];case 2:return a.sent(),this.totals.spaceUsage=n,this.totals.cacheEntries=e,[2]}})})},CoreSettingsSpaceUsagePage.prototype.refreshData=function(n){this.loadSiteData().finally(function(){n.complete()})},CoreSettingsSpaceUsagePage.prototype.deleteSiteStorage=function(n){var e=this;this.settingsHelper.deleteSiteStorage(n.siteName,n.id).then(function(l){e.totals.spaceUsage-=n.spaceUsage-l.spaceUsage,e.totals.spaceUsage-=n.cacheEntries-l.cacheEntries,n.spaceUsage=l.spaceUsage,n.cacheEntries=l.cacheEntries}).catch(function(){})},CoreSettingsSpaceUsagePage.prototype.showInfo=function(){this.domUtils.showAlert(this.translate.instant("core.help"),this.translate.instant("core.settings.spaceusagehelp"))},CoreSettingsSpaceUsagePage=o([Object(t.m)({selector:"page-core-settings-space-usage",templateUrl:"space-usage.html"}),c("design:paramtypes",[i.a,s.a,r.a,u.c])],CoreSettingsSpaceUsagePage)}(),f=l(26),d=l(32),h=l(106),b=this&&this.__decorate||function(n,e,l,t){var a,u=arguments.length,i=u<3?e:null===t?t=Object.getOwnPropertyDescriptor(e,l):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,l,t);else for(var r=n.length-1;r>=0;r--)(a=n[r])&&(i=(u<3?a(i):u>3?a(e,l,i):a(e,l))||i);return u>3&&i&&Object.defineProperty(e,l,i),i},m=function(){function CoreSettingsSpaceUsagePageModule(){}return CoreSettingsSpaceUsagePageModule=b([Object(t.I)({declarations:[g],imports:[f.a,d.a,h.a,a.l.forChild(g),u.b.forChild()]})],CoreSettingsSpaceUsagePageModule)}(),S=l(1522),v=l(1523),U=l(1524),y=l(1525),P=l(1526),w=l(1527),x=l(1528),C=l(1529),V=l(1530),j=l(1531),I=l(1532),E=l(1533),k=l(1534),R=l(25),$=l(18),O=l(31),D=l(21),M=l(19),H=l(8),N=l(27),F=l(33),L=l(47),T=l(11),G=l(16),A=l(2),J=l(22),K=l(6),q=l(17),z=l(10),B=l(15),Q=l(20),W=l(29),X=l(28),Y=l(42),Z=l(9),nn=l(40),en=l(30),ln=l(36),tn=l(7),an=l(46),un=l(43),rn=l(48),sn=l(100),on=l(1570),cn=l(371),_n=l(39),pn=l(723),gn=l(212),fn=l(35),dn=l(473),hn=l(724),bn=l(314),mn=l(247),Sn=l(372),vn=l(96),Un=l(87),yn=l(181),Pn=l(34),wn=l(107),xn=l(159),Cn=l(44),Vn=l(213),jn=l(173),In=l(54),En=l(51),kn=t._29({encapsulation:2,styles:[],data:{}}),Rn=t._27("page-core-settings-space-usage",g,function View_CoreSettingsSpaceUsagePage_Host_0(n){return t._57(0,[(n()(),t._31(0,0,null,null,1,"page-core-settings-space-usage",[],null,null,null,View_CoreSettingsSpaceUsagePage_0,kn)),t._30(1,49152,null,0,g,[i.a,s.a,r.a,$.a],null,null)],null,null)},{},{},[]),$n=l(23),On=l(367),Dn=l(368),Mn=l(370),Hn=l(369),Nn=l(472),Fn=l(722),Ln=l(270);l.d(e,"CoreSettingsSpaceUsagePageModuleNgFactory",function(){return Tn});var Tn=t._28(m,[],function(n){return t._40([t._41(512,t.o,t._21,[[8,[S.a,v.a,U.a,y.a,P.a,w.a,x.a,C.a,V.a,j.a,I.a,E.a,k.a,Rn]],[3,t.o],t.K]),t._41(4608,tn.m,tn.l,[t.G,[2,tn.w]]),t._41(4608,$n.x,$n.x,[]),t._41(4608,$n.d,$n.d,[]),t._41(4608,On.b,On.a,[]),t._41(4608,Dn.a,Dn.b,[]),t._41(4608,Mn.b,Mn.a,[]),t._41(4608,Hn.b,Hn.a,[]),t._41(4608,$.a,$.a,[Nn.a,On.b,Dn.a,Mn.b,Hn.b,$.b,$.c]),t._41(512,tn.b,tn.b,[]),t._41(512,$n.v,$n.v,[]),t._41(512,$n.i,$n.i,[]),t._41(512,$n.s,$n.s,[]),t._41(512,Fn.a,Fn.a,[]),t._41(512,u.b,u.b,[]),t._41(512,d.a,d.a,[]),t._41(512,h.a,h.a,[]),t._41(512,f.a,f.a,[]),t._41(512,Fn.b,Fn.b,[]),t._41(512,m,m,[]),t._41(256,$.c,void 0,[]),t._41(256,$.b,void 0,[]),t._41(256,Ln.a,g,[])])})}});