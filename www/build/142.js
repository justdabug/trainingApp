webpackJsonp([142],{1977:function(n,e,l){"use strict";function View_AddonCalendarDayPage_1(n){return t._57(0,[(n()(),t._31(0,0,null,null,1,"ion-icon",[["name","funnel"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(1,147456,null,0,H.a,[Y.a,t.t,t.V],{name:[0,"name"]},null)],function(n,e){n(e,1,0,"funnel")},function(n,e){n(e,0,0,t._44(e,1)._hidden)})}function View_AddonCalendarDayPage_2(n){return t._57(0,[(n()(),t._31(0,0,null,null,1,"ion-icon",[["name","ios-funnel-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(1,147456,null,0,H.a,[Y.a,t.t,t.V],{name:[0,"name"]},null)],function(n,e){n(e,1,0,"ios-funnel-outline")},function(n,e){n(e,0,0,t._44(e,1)._hidden)})}function View_AddonCalendarDayPage_3(n){return t._57(0,[(n()(),t._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,l){var t=!0;if("action"===e){t=!1!==n.component.goToCurrentDay()&&t}return t},G.b,G.a)),t._30(1,770048,null,0,W.a,[z.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),t._47(131072,B.a,[J.a,t.j])],function(n,e){n(e,1,0,t._56(e,1,0,t._44(e,2).transform("addon.calendar.today")),"fa-calendar-times-o",900)},null)}function View_AddonCalendarDayPage_4(n){return t._57(0,[(n()(),t._31(0,0,null,null,10,"ion-col",[["class","col"],["text-start",""]],null,null,null,null,null)),t._30(1,16384,null,0,K.a,[],null,null),(n()(),t._55(-1,null,["\n                "])),(n()(),t._31(3,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(n,e,l){var t=!0;if("click"===e){t=!1!==n.component.loadPrevious()&&t}return t},q.b,q.a)),t._30(4,1097728,null,0,Q.a,[[8,""],Y.a,t.t,t.V],{clear:[0,"clear"]},null),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,0,["\n                    "])),(n()(),t._31(7,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(8,147456,null,0,H.a,[Y.a,t.t,t.V],{name:[0,"name"],md:[1,"md"]},null),(n()(),t._55(-1,0,["\n                "])),(n()(),t._55(-1,null,["\n            "]))],function(n,e){n(e,4,0,"");n(e,8,0,"arrow-back","ios-arrow-back")},function(n,e){n(e,3,0,t._56(e,3,0,t._44(e,5).transform("addon.calendar.dayprev")));n(e,7,0,t._44(e,8)._hidden)})}function View_AddonCalendarDayPage_5(n){return t._57(0,[(n()(),t._31(0,0,null,null,10,"ion-col",[["class","col"],["text-end",""]],null,null,null,null,null)),t._30(1,16384,null,0,K.a,[],null,null),(n()(),t._55(-1,null,["\n                "])),(n()(),t._31(3,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(n,e,l){var t=!0;if("click"===e){t=!1!==n.component.loadNext()&&t}return t},q.b,q.a)),t._30(4,1097728,null,0,Q.a,[[8,""],Y.a,t.t,t.V],{clear:[0,"clear"]},null),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,0,["\n                    "])),(n()(),t._31(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(8,147456,null,0,H.a,[Y.a,t.t,t.V],{name:[0,"name"],md:[1,"md"]},null),(n()(),t._55(-1,0,["\n                "])),(n()(),t._55(-1,null,["\n            "]))],function(n,e){n(e,4,0,"");n(e,8,0,"arrow-forward","ios-arrow-forward")},function(n,e){n(e,3,0,t._56(e,3,0,t._44(e,5).transform("addon.calendar.daynext")));n(e,7,0,t._44(e,8)._hidden)})}function View_AddonCalendarDayPage_6(n){return t._57(0,[(n()(),t._31(0,0,null,null,8,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),t._30(1,16384,null,0,X.a,[Y.a,t.t,t.V],null,null),(n()(),t._55(-1,null,["\n            "])),(n()(),t._31(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(4,147456,null,0,H.a,[Y.a,t.t,t.V],{name:[0,"name"]},null),(n()(),t._55(5,null,[" ","\n        "])),t._47(131072,B.a,[J.a,t.j]),t._48(7,{$a:0}),t._47(131072,B.a,[J.a,t.j])],function(n,e){n(e,4,0,"warning")},function(n,e){n(e,3,0,t._44(e,4)._hidden);n(e,5,0,t._56(e,5,0,t._44(e,8).transform("core.hasdatatosync",n(e,7,0,t._56(e,5,0,t._44(e,6).transform("core.day"))))))})}function View_AddonCalendarDayPage_7(n){return t._57(0,[(n()(),t._31(0,0,null,null,3,"core-empty-box",[["icon","calendar"]],null,null,null,Z.b,Z.a)),t._30(1,49152,null,0,nn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,0,["\n        "]))],function(n,e){n(e,1,0,t._56(e,1,0,t._44(e,2).transform("addon.calendar.noevents")),"calendar")},null)}function View_AddonCalendarDayPage_10(n){return t._57(0,[(n()(),t._31(0,0,null,null,0,"img",[["class","core-module-icon"],["item-start",""]],[[8,"src",4]],null,null,null,null))],null,function(n,e){n(e,0,0,t._34(1,"",e.parent.context.$implicit.moduleIcon,""))})}function View_AddonCalendarDayPage_11(n){return t._57(0,[(n()(),t._31(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,en.b,en.a)),t._30(1,704512,null,0,ln.a,[t.t,Y.a],{name:[0,"name"]},null)],function(n,e){n(e,1,0,e.parent.context.$implicit.eventIcon)},null)}function View_AddonCalendarDayPage_12(n){return t._57(0,[(n()(),t._31(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),t._30(1,16384,null,0,tn.a,[Y.a,t.t,t.V],null,null),(n()(),t._55(-1,null,["\n                        "])),(n()(),t._31(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(4,147456,null,0,H.a,[Y.a,t.t,t.V],{name:[0,"name"]},null),(n()(),t._55(-1,null,["\n                        "])),(n()(),t._31(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),t._55(7,null,["",""])),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,null,["\n                    "]))],function(n,e){n(e,4,0,"time")},function(n,e){n(e,3,0,t._44(e,4)._hidden);n(e,7,0,t._56(e,7,0,t._44(e,8).transform("core.notsent")))})}function View_AddonCalendarDayPage_13(n){return t._57(0,[(n()(),t._31(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),t._30(1,16384,null,0,tn.a,[Y.a,t.t,t.V],null,null),(n()(),t._55(-1,null,["\n                        "])),(n()(),t._31(3,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(4,147456,null,0,H.a,[Y.a,t.t,t.V],{name:[0,"name"]},null),(n()(),t._55(-1,null,["\n                        "])),(n()(),t._31(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),t._55(7,null,["",""])),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,null,["\n                    "]))],function(n,e){n(e,4,0,"trash")},function(n,e){n(e,3,0,t._44(e,4)._hidden);n(e,7,0,t._56(e,7,0,t._44(e,8).transform("core.deletedoffline")))})}function View_AddonCalendarDayPage_9(n){return t._57(0,[(n()(),t._31(0,0,null,null,29,null,null,null,null,null,null,null)),(n()(),t._55(-1,null,["\n                "])),(n()(),t._31(2,0,null,null,26,"a",[["class","addon-calendar-event item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"item-dimmed",null]],[[null,"click"]],function(n,e,l){var t=!0;if("click"===e){t=!1!==n.component.gotoEvent(n.context.$implicit.id)&&t}return t},an.b,an.a)),t._30(3,278528,null,0,rn.i,[t.E,t.F,t.t,t.W],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t._46(4,1),t._30(5,1097728,null,3,on.a,[un.a,Y.a,t.t,t.V,[2,dn.a]],null,null),t._52(335544320,2,{contentLabel:0}),t._52(603979776,3,{_buttons:1}),t._52(603979776,4,{_icons:1}),t._30(9,16384,null,0,sn.a,[],null,null),(n()(),t._55(-1,2,["\n                    "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_10)),t._30(12,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,2,["\n                    "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_11)),t._30(15,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,2,["\n                    "])),(n()(),t._31(17,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),t._31(18,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),t._30(19,540672,null,0,cn.a,[t.t,_.a,f.a,_n.a,J.a,fn.a,hn.a,mn.a,vn.a,yn.a,d.a,gn.a,[2,pn.a],[2,En.a],[2,Dn.a],bn.a,s.a,Cn.a,Pn.a,In.a,t._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(n()(),t._55(-1,2,["\n                    "])),(n()(),t._31(21,0,null,2,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(n()(),t._55(-1,2,["\n                    "])),(n()(),t._26(16777216,null,4,1,null,View_AddonCalendarDayPage_12)),t._30(24,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,2,["\n                    "])),(n()(),t._26(16777216,null,4,1,null,View_AddonCalendarDayPage_13)),t._30(27,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,2,["\n                "])),(n()(),t._55(-1,null,["\n            "]))],function(n,e){n(e,3,0,"addon-calendar-event",n(e,4,0,"addon-calendar-eventtype-"+e.context.$implicit.eventtype));n(e,12,0,e.context.$implicit.moduleIcon);n(e,15,0,e.context.$implicit.eventIcon&&!e.context.$implicit.moduleIcon);n(e,19,0,e.context.$implicit.name,e.context.$implicit.contextLevel,e.context.$implicit.contextInstanceId);n(e,24,0,e.context.$implicit.offline&&!e.context.$implicit.deleted);n(e,27,0,e.context.$implicit.deleted)},function(n,e){n(e,2,0,e.context.$implicit.name,e.context.$implicit.ispast);n(e,21,0,e.context.$implicit.formattedtime)})}function View_AddonCalendarDayPage_8(n){return t._57(0,[(n()(),t._31(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),t._30(1,16384,null,0,An.a,[Y.a,t.t,t.V,fn.a,wn.l,On.a],null,null),(n()(),t._55(-1,null,["\n            "])),(n()(),t._26(16777216,null,null,1,null,View_AddonCalendarDayPage_9)),t._30(4,802816,null,0,rn.j,[t._11,t._6,t.E],{ngForOf:[0,"ngForOf"]},null),(n()(),t._55(-1,null,["\n        "]))],function(n,e){n(e,4,0,e.component.filteredEvents)},null)}function View_AddonCalendarDayPage_14(n){return t._57(0,[(n()(),t._31(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,Vn.b,Vn.a)),t._30(1,212992,null,0,xn.a,[t.t,En.a],null,null),t._30(2,1228800,null,2,Mn.a,[fn.a],null,null),t._52(335544320,5,{_mainButton:0}),t._52(603979776,6,{_fabLists:1}),(n()(),t._55(-1,0,["\n            "])),(n()(),t._31(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,e,l){var t=!0;if("click"===e){t=!1!==n.component.openEdit()&&t}return t},kn.b,kn.a)),t._30(7,49152,[[5,4]],0,Tn.a,[Y.a,t.t,t.V],null,null),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,0,["\n                "])),(n()(),t._31(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(11,147456,null,0,H.a,[Y.a,t.t,t.V],{name:[0,"name"]},null),(n()(),t._55(-1,0,["\n            "])),(n()(),t._55(-1,0,["\n        "]))],function(n,e){n(e,1,0);n(e,11,0,"add")},function(n,e){n(e,6,0,t._56(e,6,0,t._44(e,8).transform("addon.calendar.newevent")));n(e,10,0,t._44(e,11)._hidden)})}function View_AddonCalendarDayPage_0(n){return t._57(0,[(n()(),t._31(0,0,null,null,39,"ion-header",[],null,null,null,null,null)),t._30(1,16384,null,0,Nn.a,[Y.a,t.t,t.V,[2,jn.a]],null,null),(n()(),t._55(-1,null,["\n    "])),(n()(),t._31(3,0,null,null,35,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Sn.b,Sn.a)),t._30(4,49152,null,0,Fn.a,[Rn.a,[2,jn.a],[2,pn.a],Y.a,t.t,t.V],null,null),t._30(5,212992,null,0,Un.a,[Fn.a,fn.a,J.a,s.a],null,null),(n()(),t._55(-1,3,["\n        "])),(n()(),t._31(7,0,null,3,3,"ion-title",[],null,null,null,$n.b,$n.a)),t._30(8,49152,null,0,Ln.a,[Y.a,t.t,t.V,[2,Hn.a],[2,Fn.a]],null,null),(n()(),t._55(9,0,["",""])),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,3,["\n        "])),(n()(),t._31(12,0,null,2,25,"ion-buttons",[["end",""]],null,null,null,null,null)),t._30(13,16384,null,1,Yn.a,[Y.a,t.t,t.V,[2,Hn.a],[2,Fn.a]],null,null),t._52(603979776,1,{_buttons:1}),(n()(),t._55(-1,null,["\n            "])),(n()(),t._31(16,0,null,null,9,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,e,l){var t=!0;if("click"===e){t=!1!==n.component.openFilter(l)&&t}return t},q.b,q.a)),t._30(17,1097728,[[1,4]],0,Q.a,[[8,""],Y.a,t.t,t.V],null,null),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,0,["\n                "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_1)),t._30(21,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,0,["\n                "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_2)),t._30(24,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,0,["\n            "])),(n()(),t._55(-1,null,["\n            "])),(n()(),t._31(27,0,null,null,9,"core-context-menu",[],null,null,null,Gn.b,Gn.a)),t._30(28,245760,null,0,z.a,[J.a,Wn.a,t.t,f.a,[2,zn.a],hn.a],null,null),(n()(),t._55(-1,0,["\n                "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_3)),t._30(31,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,0,["\n                "])),(n()(),t._31(33,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,l){var t=!0;if("action"===e){t=!1!==n.component.doRefresh(null,l,!0)&&t}return t},G.b,G.a)),t._30(34,770048,null,0,W.a,[z.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,0,["\n            "])),(n()(),t._55(-1,null,["\n        "])),(n()(),t._55(-1,3,["\n    "])),(n()(),t._55(-1,null,["\n"])),(n()(),t._55(-1,null,["\n"])),(n()(),t._31(41,0,null,null,50,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Bn.b,Bn.a)),t._30(42,4374528,null,0,En.a,[Y.a,fn.a,On.a,t.t,t.V,Rn.a,Jn.a,t.M,[2,jn.a],[2,pn.a]],null,null),(n()(),t._55(-1,1,["\n    "])),(n()(),t._31(44,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,e,l){var t=!0;if("ionRefresh"===e){t=!1!==n.component.doRefresh(l)&&t}return t},null,null)),t._30(45,212992,null,0,Kn.a,[fn.a,En.a,t.M,wn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),t._55(-1,null,["\n        "])),(n()(),t._31(47,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,qn.b,qn.a)),t._30(48,114688,null,0,Qn.a,[Kn.a,Y.a],{pullingText:[0,"pullingText"]},null),t._47(131072,B.a,[J.a,t.j]),(n()(),t._55(-1,null,["\n    "])),(n()(),t._55(-1,1,["\n\n    "])),(n()(),t._55(-1,1,["\n    "])),(n()(),t._31(53,0,null,1,19,"ion-grid",[["class","safe-area-page grid"],["padding-top",""]],null,null,null,null,null)),t._30(54,16384,null,0,Xn.a,[],null,null),(n()(),t._55(-1,null,["\n        "])),(n()(),t._31(56,0,null,null,15,"ion-row",[["class","row"]],null,null,null,null,null)),t._30(57,16384,null,0,Zn.a,[],null,null),(n()(),t._55(-1,null,["\n            "])),(n()(),t._26(16777216,null,null,1,null,View_AddonCalendarDayPage_4)),t._30(60,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,null,["\n            "])),(n()(),t._31(62,0,null,null,5,"ion-col",[["class","addon-calendar-period col"],["text-center",""]],null,null,null,null,null)),t._30(63,16384,null,0,K.a,[],null,null),(n()(),t._55(-1,null,["\n                "])),(n()(),t._31(65,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),t._55(66,null,["",""])),(n()(),t._55(-1,null,["\n            "])),(n()(),t._55(-1,null,["\n            "])),(n()(),t._26(16777216,null,null,1,null,View_AddonCalendarDayPage_5)),t._30(70,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,null,["\n        "])),(n()(),t._55(-1,null,["\n    "])),(n()(),t._55(-1,1,["\n\n    "])),(n()(),t._31(74,0,null,1,16,"core-loading",[["class","safe-area-page"]],null,null,null,ne.b,ne.a)),t._30(75,638976,null,0,ee.a,[J.a,t.t,s.a,hn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),t._55(-1,0,["\n        "])),(n()(),t._55(-1,0,["\n        "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_6)),t._30(79,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,0,["\n\n        "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_7)),t._30(82,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,0,["\n\n        "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_8)),t._30(85,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,0,["\n\n        "])),(n()(),t._55(-1,0,["\n        "])),(n()(),t._26(16777216,null,0,1,null,View_AddonCalendarDayPage_14)),t._30(89,16384,null,0,rn.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(n()(),t._55(-1,0,["\n    "])),(n()(),t._55(-1,1,["\n"])),(n()(),t._55(-1,null,["\n"]))],function(n,e){var l=e.component;n(e,5,0);n(e,21,0,l.filter.filtered);n(e,24,0,!l.filter.filtered),n(e,28,0);n(e,31,0,!l.isCurrentDay);n(e,34,0,t._56(e,34,0,t._44(e,35).transform("core.settings.synchronizenow")),l.syncIcon,!1,400,!l.loaded||!l.hasOffline||!l.isOnline);n(e,45,0,l.loaded);n(e,48,0,t._34(1,"",t._56(e,48,0,t._44(e,49).transform("core.pulltorefresh")),""));n(e,60,0,l.currentMoment);n(e,70,0,l.currentMoment);n(e,75,0,l.loaded);n(e,79,0,l.hasOffline);n(e,82,0,!l.filteredEvents||!l.filteredEvents.length);n(e,85,0,l.filteredEvents&&l.filteredEvents.length);n(e,89,0,l.canCreate)},function(n,e){var l=e.component;n(e,3,0,t._44(e,4)._hidden,t._44(e,4)._sbPadding);n(e,9,0,t._56(e,9,0,t._44(e,10).transform("addon.calendar.calendarevents")));n(e,16,0,t._56(e,16,0,t._44(e,18).transform("core.filter")));n(e,41,0,t._44(e,42).statusbarPadding,t._44(e,42)._hasRefresher);n(e,44,0,"inactive"!==t._44(e,45).state,t._44(e,45)._top);n(e,47,0,t._44(e,48).r.state);n(e,66,0,l.periodName)})}Object.defineProperty(e,"__esModule",{value:!0});var t=l(0),a=l(5),r=l(3),i=l(26),o=l(32),u=l(106),d=l(10),s=l(9),c=l(151),_=l(1),f=l(4),h=l(24),m=l(186),v=l(275),y=l(276),g=l(478),p=l(52),E=l(188),D=l(746),b=l(185),C=l(14),P=this&&this.__decorate||function(n,e,l,t){var a,r=arguments.length,i=r<3?e:null===t?t=Object.getOwnPropertyDescriptor(e,l):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,l,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(i=(r<3?a(i):r>3?a(e,l,i):a(e,l))||i);return r>3&&i&&Object.defineProperty(e,l,i),i},I=this&&this.__metadata||function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},A=function(){function AddonCalendarDayPage(n,e,l,t,a,r,i,o,u,d,s,c,_,f,h,v,y){var p=this;this.navCtrl=r,this.domUtils=i,this.timeUtils=o,this.calendarProvider=u,this.calendarOffline=d,this.calendarHelper=s,this.calendarSync=c,this.eventsProvider=_,this.coursesProvider=f,this.coursesHelper=h,this.appProvider=v,this.popoverCtrl=y,this.categories={},this.events=[],this.onlineEvents=[],this.offlineEvents={},this.offlineEditedEventsIds=[],this.deletedEvents=[],this.filteredEvents=[],this.canCreate=!1,this.loaded=!1,this.hasOffline=!1,this.isOnline=!1,this.filter={filtered:!1,courseId:null,categoryId:null,course:!0,group:!0,site:!0,user:!0,category:!0};var E=new Date;m.a.ALL_TYPES.forEach(function(n){p.filter[n]=e.get(n),p.filter[n]=void 0===p.filter[n]||p.filter[n]}),this.filter.courseId=e.get("courseId"),this.filter.categoryId=e.get("categoryId"),this.filter.filtered=!!this.filter.courseId||m.a.ALL_TYPES.some(function(n){return!p.filter[n]}),this.year=e.get("year")||E.getFullYear(),this.month=e.get("month")||E.getMonth()+1,this.day=e.get("day")||E.getDate(),this.currentSiteId=a.getCurrentSiteId(),n.isAvailable()&&(this.obsDefaultTimeChange=_.on(m.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){u.scheduleEventsNotifications(p.onlineEvents)},this.currentSiteId)),this.newEventObserver=_.on(m.a.NEW_EVENT_EVENT,function(n){n&&n.event&&(p.loaded=!1,p.refreshData(!0,!1,!0))},this.currentSiteId),this.discardedObserver=_.on(m.a.NEW_EVENT_DISCARDED_EVENT,function(){p.loaded=!1,p.refreshData(!0,!1,!0)},this.currentSiteId),this.editEventObserver=_.on(m.a.EDIT_EVENT_EVENT,function(n){n&&n.event&&(p.loaded=!1,p.refreshData(!0,!1,!0))},this.currentSiteId),this.syncObserver=_.on(g.a.AUTO_SYNCED,function(n){p.loaded=!1,p.refreshData(!1,!1,!0)},this.currentSiteId),this.manualSyncObserver=_.on(g.a.MANUAL_SYNCED,function(n){!n||"day"==n.source&&n.year==p.year&&n.month==p.month&&n.day==p.day||(p.loaded=!1,p.refreshData(!1,!1,!0))},this.currentSiteId),this.deleteEventObserver=_.on(m.a.DELETED_EVENT_EVENT,function(n){n&&!n.sent?(p.hasOffline=p.markAsDeleted(n.eventId,!0)||p.hasOffline,p.deletedEvents.push(n.eventId)):(p.loaded=!1,p.refreshData(!1,!1,!0))},this.currentSiteId),this.undeleteEventObserver=_.on(m.a.UNDELETED_EVENT_EVENT,function(n){if(n&&n.eventId){var e=p.markAsDeleted(n.eventId,!1),l=p.deletedEvents.indexOf(n.eventId);if(-1!=l&&p.deletedEvents.splice(l,1),e)if(p.hasOffline=!1,p.events.length!=p.onlineEvents.length)p.hasOffline=!0;else{var t=p.events.find(function(n){return n.deleted||n.offline});p.hasOffline=!!t}}},this.currentSiteId),this.filterChangedObserver=this.eventsProvider.on(m.a.FILTER_CHANGED_EVENT,function(n){p.filter=n,p.calendarHelper.canEditEvents(p.filter.courseId).then(function(n){p.canCreate=n}),p.filterEvents()}),this.onlineObserver=l.onchange().subscribe(function(){t.run(function(){p.isOnline=p.appProvider.isOnline()})})}return AddonCalendarDayPage.prototype.ngOnInit=function(){this.calculateCurrentMoment(),this.calculateIsCurrentDay(),this.fetchData(!0,!1)},AddonCalendarDayPage.prototype.fetchData=function(n,e){var l=this;this.syncIcon="spinner",this.isOnline=this.appProvider.isOnline();return(n?this.sync():Promise.resolve()).then(function(){var n=[];return n.push(l.coursesHelper.getCoursesForPopover(l.filter.courseId).then(function(n){l.courses=n.courses})),n.push(l.loadCategories()),n.push(l.calendarOffline.getAllEditedEvents().then(function(n){n.forEach(function(n){n.offline=!0,l.calendarHelper.formatEventData(n)}),l.offlineEvents=l.calendarHelper.classifyIntoMonths(n);var e=n.filter(function(n){return n.id>0});l.offlineEditedEventsIds=e.map(function(n){return n.id})})),n.push(l.calendarOffline.getAllDeletedEventsIds().then(function(n){l.deletedEvents=n})),n.push(l.calendarHelper.canEditEvents(l.filter.courseId).then(function(n){l.canCreate=n})),n.push(l.calendarProvider.getCalendarTimeFormat().then(function(n){l.timeFormat=n})),Promise.all(n)}).then(function(){return l.fetchEvents()}).catch(function(n){l.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0)}).finally(function(){l.loaded=!0,l.syncIcon="sync"})},AddonCalendarDayPage.prototype.fetchEvents=function(){var n=this;return this.calendarProvider.getDayEvents(this.year,this.month,this.day).catch(function(e){return n.appProvider.isOnline()?Promise.reject(e):Promise.resolve({events:[]})}).then(function(e){var l=[];n.periodName=n.timeUtils.userDate(new Date(n.year,n.month-1,n.day).getTime(),"core.strftimedaydate"),n.onlineEvents=e.events,n.onlineEvents.forEach(n.calendarHelper.formatEventData.bind(n.calendarHelper)),n.calendarProvider.scheduleEventsNotifications(n.onlineEvents),n.events=n.mergeEvents(),n.filterEvents(),n.calculateIsCurrentDay();var t=1e3*n.currentMoment.unix();return n.events.forEach(function(e){e.ispast=n.isPastDay||n.isCurrentDay&&n.isEventPast(e),l.push(n.calendarProvider.formatEventTime(e,n.timeFormat,!0,t).then(function(n){e.formattedtime=n}))}),Promise.all(l)})},AddonCalendarDayPage.prototype.mergeEvents=function(){var n=this;if(this.hasOffline=!1,!Object.keys(this.offlineEvents).length&&!this.deletedEvents.length)return this.onlineEvents;var e=this.offlineEvents[this.calendarHelper.getMonthId(this.year,this.month)],l=e&&e[this.day],t=this.onlineEvents;return this.deletedEvents.length&&t.forEach(function(e){e.deleted=-1!=n.deletedEvents.indexOf(e.id),e.deleted&&(n.hasOffline=!0)}),this.offlineEditedEventsIds.length&&(t=t.filter(function(e){return-1==n.offlineEditedEventsIds.indexOf(e.id)})).length!=this.onlineEvents.length&&(this.hasOffline=!0),l&&l.length&&(this.hasOffline=!0,t=this.sortEvents(t.concat(l))),t},AddonCalendarDayPage.prototype.filterEvents=function(){this.filteredEvents=this.calendarHelper.getFilteredEvents(this.events,this.filter,this.categories)},AddonCalendarDayPage.prototype.sortEvents=function(n){return n.sort(function(n,e){return n.timestart==e.timestart?n.timeduration-e.timeduration:n.timestart-e.timestart})},AddonCalendarDayPage.prototype.doRefresh=function(n,e,l){return this.loaded?this.refreshData(!0,l).finally(function(){n&&n.complete(),e&&e()}):Promise.resolve()},AddonCalendarDayPage.prototype.refreshData=function(n,e,l){var t=this;this.syncIcon="spinner";var a=[];return l||a.push(this.calendarProvider.invalidateDayEvents(this.year,this.month,this.day)),a.push(this.calendarProvider.invalidateAllowedEventTypes()),a.push(this.coursesProvider.invalidateCategories(0,!0)),a.push(this.calendarProvider.invalidateTimeFormat()),Promise.all(a).finally(function(){return t.fetchData(n,e)})},AddonCalendarDayPage.prototype.loadCategories=function(){var n=this;return this.coursesProvider.getCategories(0,!0).then(function(e){n.categories={},e.forEach(function(e){n.categories[e.id]=e})}).catch(function(){})},AddonCalendarDayPage.prototype.sync=function(n){var e=this;return this.calendarSync.syncEvents().then(function(n){n.warnings&&n.warnings.length&&e.domUtils.showErrorModal(n.warnings[0]),n.updated&&(n.source="day",n.day=e.day,n.month=e.month,n.year=e.year,e.eventsProvider.trigger(g.a.MANUAL_SYNCED,n,e.currentSiteId))}).catch(function(l){n&&e.domUtils.showErrorModalDefault(l,"core.errorsync",!0)})},AddonCalendarDayPage.prototype.gotoEvent=function(n){n<0?this.openEdit(n):this.navCtrl.push("AddonCalendarEventPage",{id:n})},AddonCalendarDayPage.prototype.openFilter=function(n){this.popoverCtrl.create(D.a,{courses:this.courses,filter:this.filter}).present({ev:n})},AddonCalendarDayPage.prototype.openEdit=function(n){var e={};n?e.eventId=n:e.timestamp=1e3*C().year(this.year).month(this.month-1).date(this.day).unix(),this.filter.courseId&&(e.courseId=this.filter.courseId),this.navCtrl.push("AddonCalendarEditEventPage",e)},AddonCalendarDayPage.prototype.calculateCurrentMoment=function(){this.currentMoment=C().year(this.year).month(this.month-1).date(this.day)},AddonCalendarDayPage.prototype.calculateIsCurrentDay=function(){var n=new Date;this.currentTime=this.timeUtils.timestamp(),this.isCurrentDay=this.year==n.getFullYear()&&this.month==n.getMonth()+1&&this.day==n.getDate(),this.isPastDay=this.year<n.getFullYear()||this.year==n.getFullYear()&&this.month<n.getMonth()||this.year==n.getFullYear()&&this.month==n.getMonth()+1&&this.day<n.getDate()},AddonCalendarDayPage.prototype.goToCurrentDay=function(){var n=this,e=new Date,l=this.day,t=this.month,a=this.year;this.day=e.getDate(),this.month=e.getMonth()+1,this.year=e.getFullYear(),this.calculateCurrentMoment(),this.loaded=!1,this.fetchEvents().then(function(){n.isCurrentDay=!0}).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.calendar.errorloadevents",!0),n.year=a,n.month=t,n.day=l,n.calculateCurrentMoment()}).finally(function(){n.loaded=!0})},AddonCalendarDayPage.prototype.loadNext=function(){var n=this;this.increaseDay(),this.loaded=!1,this.fetchEvents().catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.calendar.errorloadevents",!0),n.decreaseDay()}).finally(function(){n.loaded=!0})},AddonCalendarDayPage.prototype.loadPrevious=function(){var n=this;this.decreaseDay(),this.loaded=!1,this.fetchEvents().catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.calendar.errorloadevents",!0),n.increaseDay()}).finally(function(){n.loaded=!0})},AddonCalendarDayPage.prototype.decreaseDay=function(){this.currentMoment.subtract(1,"day"),this.year=this.currentMoment.year(),this.month=this.currentMoment.month()+1,this.day=this.currentMoment.date()},AddonCalendarDayPage.prototype.increaseDay=function(){this.currentMoment.add(1,"day"),this.year=this.currentMoment.year(),this.month=this.currentMoment.month()+1,this.day=this.currentMoment.date()},AddonCalendarDayPage.prototype.markAsDeleted=function(n,e){var l=this.onlineEvents.find(function(e){return e.id==n});return!!l&&(l.deleted=e,!0)},AddonCalendarDayPage.prototype.isEventPast=function(n){return n.timestart+n.timeduration<this.currentTime},AddonCalendarDayPage.prototype.ngOnDestroy=function(){this.newEventObserver&&this.newEventObserver.off(),this.discardedObserver&&this.discardedObserver.off(),this.editEventObserver&&this.editEventObserver.off(),this.deleteEventObserver&&this.deleteEventObserver.off(),this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.syncObserver&&this.syncObserver.off(),this.manualSyncObserver&&this.manualSyncObserver.off(),this.onlineObserver&&this.onlineObserver.unsubscribe(),this.filterChangedObserver&&this.filterChangedObserver.off(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},AddonCalendarDayPage=P([Object(t.m)({selector:"page-addon-calendar-day",templateUrl:"day.html"}),I("design:paramtypes",[c.a,a.t,b.a,t.M,_.a,a.s,f.a,h.a,m.a,v.a,y.a,g.a,s.a,p.a,E.a,d.a,a.w])],AddonCalendarDayPage)}(),w=this&&this.__decorate||function(n,e,l,t){var a,r=arguments.length,i=r<3?e:null===t?t=Object.getOwnPropertyDescriptor(e,l):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,l,t);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(i=(r<3?a(i):r>3?a(e,l,i):a(e,l))||i);return r>3&&i&&Object.defineProperty(e,l,i),i},O=function(){function AddonCalendarDayPageModule(){}return AddonCalendarDayPageModule=w([Object(t.I)({declarations:[A],imports:[i.a,o.a,u.a,a.l.forChild(A),r.b.forChild()]})],AddonCalendarDayPageModule)}(),V=l(1522),x=l(1523),M=l(1524),k=l(1525),T=l(1526),N=l(1527),j=l(1528),S=l(1529),F=l(1530),R=l(1531),U=l(1532),$=l(1533),L=l(1534),H=l(48),Y=l(8),G=l(92),W=l(83),z=l(78),B=l(25),J=l(18),K=l(119),q=l(46),Q=l(43),X=l(89),Z=l(124),nn=l(114),en=l(80),ln=l(75),tn=l(248),an=l(31),rn=l(7),on=l(21),un=l(19),dn=l(27),sn=l(33),cn=l(47),_n=l(11),fn=l(16),hn=l(2),mn=l(22),vn=l(6),yn=l(17),gn=l(15),pn=l(20),En=l(29),Dn=l(28),bn=l(42),Cn=l(40),Pn=l(30),In=l(36),An=l(86),wn=l(44),On=l(34),Vn=l(281),xn=l(255),Mn=l(218),kn=l(282),Tn=l(190),Nn=l(371),jn=l(39),Sn=l(723),Fn=l(212),Rn=l(35),Un=l(473),$n=l(724),Ln=l(314),Hn=l(247),Yn=l(372),Gn=l(91),Wn=l(70),zn=l(76),Bn=l(181),Jn=l(107),Kn=l(159),qn=l(213),Qn=l(173),Xn=l(164),Zn=l(120),ne=l(54),ee=l(51),le=l(69),te=t._29({encapsulation:2,styles:[],data:{}}),ae=t._27("page-addon-calendar-day",A,function View_AddonCalendarDayPage_Host_0(n){return t._57(0,[(n()(),t._31(0,0,null,null,1,"page-addon-calendar-day",[],null,null,null,View_AddonCalendarDayPage_0,te)),t._30(1,245760,null,0,A,[c.a,le.a,b.a,t.M,_.a,pn.a,f.a,h.a,m.a,v.a,y.a,g.a,s.a,p.a,E.a,d.a,Wn.a],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),re=l(23),ie=l(367),oe=l(368),ue=l(370),de=l(369),se=l(472),ce=l(722),_e=l(270);l.d(e,"AddonCalendarDayPageModuleNgFactory",function(){return fe});var fe=t._28(O,[],function(n){return t._40([t._41(512,t.o,t._21,[[8,[V.a,x.a,M.a,k.a,T.a,N.a,j.a,S.a,F.a,R.a,U.a,$.a,L.a,ae]],[3,t.o],t.K]),t._41(4608,rn.m,rn.l,[t.G,[2,rn.w]]),t._41(4608,re.x,re.x,[]),t._41(4608,re.d,re.d,[]),t._41(4608,ie.b,ie.a,[]),t._41(4608,oe.a,oe.b,[]),t._41(4608,ue.b,ue.a,[]),t._41(4608,de.b,de.a,[]),t._41(4608,J.a,J.a,[se.a,ie.b,oe.a,ue.b,de.b,J.b,J.c]),t._41(512,rn.b,rn.b,[]),t._41(512,re.v,re.v,[]),t._41(512,re.i,re.i,[]),t._41(512,re.s,re.s,[]),t._41(512,ce.a,ce.a,[]),t._41(512,r.b,r.b,[]),t._41(512,o.a,o.a,[]),t._41(512,u.a,u.a,[]),t._41(512,i.a,i.a,[]),t._41(512,ce.b,ce.b,[]),t._41(512,O,O,[]),t._41(256,J.c,void 0,[]),t._41(256,J.b,void 0,[]),t._41(256,_e.a,A,[])])})}});