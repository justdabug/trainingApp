webpackJsonp([77],{2061:function(n,t,i){"use strict";function View_AddonNotificationsActionsComponent_2(n){return l._57(0,[(n()(),l._31(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),l._30(1,16384,null,0,Pn.a,[],null,null),(n()(),l._55(-1,null,["\n        "])),(n()(),l._31(3,0,null,null,6,"button",[["block",""],["clear",""],["icon-left",""],["ion-button",""],["small",""]],null,[[null,"click"]],function(n,t,i){var l=!0;if("click"===t){l=!1!==n.context.$implicit.action(void 0,n.component.navCtrl)&&l}return l},S.b,S.a)),l._30(4,1097728,null,0,G.a,[[8,""],B.a,l.t,l.V],{small:[0,"small"],clear:[1,"clear"],block:[2,"block"]},null),(n()(),l._55(-1,0,["\n            "])),(n()(),l._31(6,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),l._30(7,147456,null,0,Ln.a,[B.a,l.t,l.V],{name:[0,"name"]},null),(n()(),l._55(8,0,["\n            ","\n        "])),l._47(131072,W.a,[q.a,l.j]),(n()(),l._55(-1,null,["\n    "]))],function(n,t){n(t,4,0,"","","");n(t,7,0,l._34(1,"",t.context.$implicit.icon,""))},function(n,t){n(t,6,0,l._44(t,7)._hidden);n(t,8,0,l._56(t,8,0,l._44(t,9).transform(t.context.$implicit.message)))})}function View_AddonNotificationsActionsComponent_1(n){return l._57(0,[(n()(),l._31(0,0,null,null,5,"ion-row",[["class","row"],["justify-content-around",""]],null,null,null,null,null)),l._30(1,16384,null,0,yn.a,[],null,null),(n()(),l._55(-1,null,["\n    "])),(n()(),l._26(16777216,null,null,1,null,View_AddonNotificationsActionsComponent_2)),l._30(4,802816,null,0,r.j,[l._11,l._6,l.E],{ngForOf:[0,"ngForOf"]},null),(n()(),l._55(-1,null,["\n"]))],function(n,t){n(t,4,0,t.component.actions)},null)}function View_AddonNotificationsActionsComponent_0(n){return l._57(0,[(n()(),l._26(16777216,null,null,1,null,View_AddonNotificationsActionsComponent_1)),l._30(1,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,null,["\n"]))],function(n,t){var i=t.component;n(t,1,0,i.actions&&i.actions.length>0)},null)}function View_AddonNotificationsListPage_2(n){return l._57(0,[(n()(),l._31(0,0,null,null,6,"button",[["block",""],["color","light"],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(n,t,i){var l=!0;if("click"===t){l=!1!==n.component.markAllNotificationsAsRead()&&l}return l},S.b,S.a)),l._30(1,1097728,null,0,G.a,[[8,""],B.a,l.t,l.V],{color:[0,"color"],block:[1,"block"]},null),(n()(),l._55(-1,0,["\n                "])),(n()(),l._31(3,0,null,0,1,"core-icon",[["name","fa-check"]],null,null,null,J.b,J.a)),l._30(4,704512,null,0,K.a,[l.t,B.a],{name:[0,"name"]},null),(n()(),l._55(5,0,["\n                ","\n            "])),l._47(131072,W.a,[q.a,l.j])],function(n,t){n(t,1,0,"light","");n(t,4,0,"fa-check")},function(n,t){n(t,5,0,l._56(t,5,0,l._44(t,6).transform("addon.notifications.markallread")))})}function View_AddonNotificationsListPage_3(n){return l._57(0,[(n()(),l._31(0,0,null,null,5,"button",[["block",""],["color","light"],["icon-start",""],["ion-button",""]],null,null,null,S.b,S.a)),l._30(1,1097728,null,0,G.a,[[8,""],B.a,l.t,l.V],{color:[0,"color"],block:[1,"block"]},null),(n()(),l._55(-1,0,["\n                "])),(n()(),l._31(3,0,null,0,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,z.b,z.a)),l._30(4,114688,null,0,Q.a,[B.a,l.t,l.V],null,null),(n()(),l._55(-1,0,["\n            "]))],function(n,t){n(t,1,0,"light",""),n(t,4,0)},function(n,t){n(t,3,0,l._44(t,4)._paused)})}function View_AddonNotificationsListPage_1(n){return l._57(0,[(n()(),l._31(0,0,null,null,7,"div",[["padding",""]],null,null,null,null,null)),(n()(),l._55(-1,null,["\n            "])),(n()(),l._26(16777216,null,null,1,null,View_AddonNotificationsListPage_2)),l._30(3,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,null,["\n            "])),(n()(),l._26(16777216,null,null,1,null,View_AddonNotificationsListPage_3)),l._30(6,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,null,["\n        "]))],function(n,t){var i=t.component;n(t,3,0,!i.loadingMarkAllNotificationsAsRead);n(t,6,0,i.loadingMarkAllNotificationsAsRead)},null)}function View_AddonNotificationsListPage_5(n){return l._57(0,[(n()(),l._31(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,X.b,X.a)),l._30(1,770048,null,0,Y.a,[Z.a,f.a,N.a,nn.a,b.a,[2,tn.a]],{user:[0,"user"],profileUrl:[1,"profileUrl"],fullname:[2,"fullname"],userId:[3,"userId"],extraIcon:[4,"extraIcon"]},null),l._30(2,16384,null,0,ln.a,[],null,null)],function(n,t){n(t,1,0,t.parent.context.$implicit,t.parent.context.$implicit.profileimageurlfrom,t.parent.context.$implicit.userfromfullname,t.parent.context.$implicit.useridfrom,t.parent.context.$implicit.iconurl)},null)}function View_AddonNotificationsListPage_6(n){return l._57(0,[(n()(),l._31(0,0,null,null,0,"img",[["alt",""],["class","core-notification-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(n,t){n(t,0,0,t.parent.context.$implicit.iconurl)})}function View_AddonNotificationsListPage_7(n){return l._57(0,[(n()(),l._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),l._31(1,0,null,null,1,"core-icon",[["color","primary"],["name","fa-circle"]],null,null,null,J.b,J.a)),l._30(2,704512,null,0,K.a,[l.t,B.a],{name:[0,"name"],color:[1,"color"]},null)],function(n,t){n(t,2,0,"fa-circle","primary")},null)}function View_AddonNotificationsListPage_8(n){return l._57(0,[(n()(),l._31(0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l._55(1,null,["",""]))],null,function(n,t){n(t,1,0,t.parent.context.$implicit.userfromfullname)})}function View_AddonNotificationsListPage_4(n){return l._57(0,[(n()(),l._31(0,0,null,null,48,"ion-card",[],null,null,null,null,null)),l._30(1,16384,null,0,on.a,[B.a,l.t,l.V],null,null),(n()(),l._55(-1,null,["\n            "])),(n()(),l._31(3,0,null,null,28,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,en.b,en.a)),l._30(4,1097728,null,3,an.a,[un.a,B.a,l.t,l.V,[2,cn.a]],null,null),l._52(335544320,1,{contentLabel:0}),l._52(603979776,2,{_buttons:1}),l._52(603979776,3,{_icons:1}),l._30(8,16384,null,0,rn.a,[],null,null),(n()(),l._55(-1,2,["\n                "])),(n()(),l._26(16777216,null,0,1,null,View_AddonNotificationsListPage_5)),l._30(11,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,2,["\n                "])),(n()(),l._26(16777216,null,0,1,null,View_AddonNotificationsListPage_6)),l._30(14,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,2,["\n                "])),(n()(),l._31(16,0,null,2,1,"h2",[],null,null,null,null,null)),(n()(),l._55(17,null,["",""])),(n()(),l._55(-1,2,["\n                "])),(n()(),l._31(19,0,null,2,8,"p",[],null,null,null,null,null)),(n()(),l._31(20,0,null,null,6,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),l._30(21,16384,null,0,sn.a,[B.a,l.t,l.V],null,null),(n()(),l._55(22,null,["\n                        ","\n                        "])),l._49(23,1),(n()(),l._26(16777216,null,null,1,null,View_AddonNotificationsListPage_7)),l._30(25,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,null,["\n                    "])),(n()(),l._55(-1,null,["\n                "])),(n()(),l._55(-1,2,["\n                "])),(n()(),l._26(16777216,null,2,1,null,View_AddonNotificationsListPage_8)),l._30(30,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,2,["\n            "])),(n()(),l._55(-1,null,["\n            "])),(n()(),l._31(33,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,en.b,en.a)),l._30(34,1097728,null,3,an.a,[un.a,B.a,l.t,l.V,[2,cn.a]],null,null),l._52(335544320,4,{contentLabel:0}),l._52(603979776,5,{_buttons:1}),l._52(603979776,6,{_icons:1}),l._30(38,16384,null,0,rn.a,[],null,null),(n()(),l._55(-1,2,["\n                "])),(n()(),l._31(40,0,null,2,3,"p",[],null,null,null,null,null)),(n()(),l._31(41,16777216,null,null,2,"core-format-text",[["contextLevel","system"]],null,null,null,null,null)),l._30(42,540672,null,0,fn.a,[l.t,f.a,m.a,A.a,q.a,dn.a,N.a,_n.a,pn.a,hn.a,nn.a,gn.a,[2,Z.a],[2,mn.a],[2,tn.a],An.a,b.a,bn.a,Nn.a,vn.a,l._11],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),l._49(43,1),(n()(),l._55(-1,2,["\n            "])),(n()(),l._55(-1,null,["\n            "])),(n()(),l._31(46,0,null,null,1,"addon-notifications-actions",[],null,null,null,View_AddonNotificationsActionsComponent_0,xn)),l._30(47,114688,null,0,p,[s.a,f.a,Z.a],{contextUrl:[0,"contextUrl"],courseId:[1,"courseId"],data:[2,"data"]},null),(n()(),l._55(-1,null,["\n        "]))],function(n,t){n(t,11,0,t.context.$implicit.useridfrom>0);n(t,14,0,t.context.$implicit.useridfrom<=0&&t.context.$implicit.iconurl);n(t,25,0,!t.context.$implicit.timeread);n(t,30,0,t.context.$implicit.userfromfullname);n(t,42,0,l._56(t,42,0,n(t,43,0,l._44(t.parent,1),t.context.$implicit.mobiletext)),"system",0);n(t,47,0,t.context.$implicit.contexturl,t.context.$implicit.courseid,t.context.$implicit.customdata)},function(n,t){n(t,17,0,t.context.$implicit.subject);n(t,22,0,l._56(t,22,0,n(t,23,0,l._44(t.parent,0),t.context.$implicit.timecreated)))})}function View_AddonNotificationsListPage_9(n){return l._57(0,[(n()(),l._31(0,0,null,null,2,"core-empty-box",[["icon","notifications"]],null,null,null,Vn.b,Vn.a)),l._30(1,49152,null,0,wn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),l._47(131072,W.a,[q.a,l.j])],function(n,t){n(t,1,0,l._56(t,1,0,l._44(t,2).transform("addon.notifications.therearentnotificationsyet")),"notifications")},null)}function View_AddonNotificationsListPage_0(n){return l._57(0,[l._47(0,kn.a,[pn.a,q.a,Rn.a]),l._47(0,In.a,[]),(n()(),l._31(2,0,null,null,12,"ion-header",[],null,null,null,null,null)),l._30(3,16384,null,0,Cn.a,[B.a,l.t,l.V,[2,On.a]],null,null),(n()(),l._55(-1,null,["\n    "])),(n()(),l._31(5,0,null,null,8,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,jn.b,jn.a)),l._30(6,49152,null,0,Mn.a,[Dn.a,[2,On.a],[2,Z.a],B.a,l.t,l.V],null,null),l._30(7,212992,null,0,En.a,[Mn.a,dn.a,q.a,b.a],null,null),(n()(),l._55(-1,3,["\n        "])),(n()(),l._31(9,0,null,3,3,"ion-title",[],null,null,null,$n.b,$n.a)),l._30(10,49152,null,0,Un.a,[B.a,l.t,l.V,[2,Tn.a],[2,Mn.a]],null,null),(n()(),l._55(11,0,["",""])),l._47(131072,W.a,[q.a,l.j]),(n()(),l._55(-1,3,["\n    "])),(n()(),l._55(-1,null,["\n"])),(n()(),l._55(-1,null,["\n"])),(n()(),l._31(16,0,null,null,26,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Fn.b,Fn.a)),l._30(17,4374528,null,0,mn.a,[B.a,dn.a,Hn.a,l.t,l.V,Dn.a,Sn.a,l.M,[2,On.a],[2,Z.a]],null,null),(n()(),l._55(-1,1,["\n    "])),(n()(),l._31(19,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,t,i){var l=!0;if("ionRefresh"===t){l=!1!==n.component.refreshNotifications(i)&&l}return l},null,null)),l._30(20,212992,null,0,Gn.a,[dn.a,mn.a,l.M,Bn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),l._55(-1,null,["\n        "])),(n()(),l._31(22,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Jn.b,Jn.a)),l._30(23,114688,null,0,Kn.a,[Gn.a,B.a],{pullingText:[0,"pullingText"]},null),l._47(131072,W.a,[q.a,l.j]),(n()(),l._55(-1,null,["\n    "])),(n()(),l._55(-1,1,["\n    "])),(n()(),l._31(27,0,null,1,14,"core-loading",[],null,null,null,Wn.b,Wn.a)),l._30(28,638976,null,0,qn.a,[q.a,l.t,b.a,N.a],{hideUntil:[0,"hideUntil"]},null),(n()(),l._55(-1,0,["\n        "])),(n()(),l._26(16777216,null,0,1,null,View_AddonNotificationsListPage_1)),l._30(31,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,0,["\n        "])),(n()(),l._26(16777216,null,0,1,null,View_AddonNotificationsListPage_4)),l._30(34,802816,null,0,r.j,[l._11,l._6,l.E],{ngForOf:[0,"ngForOf"]},null),(n()(),l._55(-1,0,["\n        "])),(n()(),l._26(16777216,null,0,1,null,View_AddonNotificationsListPage_9)),l._30(37,16384,null,0,r.k,[l._11,l._6],{ngIf:[0,"ngIf"]},null),(n()(),l._55(-1,0,["\n        "])),(n()(),l._31(39,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(n,t,i){var l=!0;if("action"===t){l=!1!==n.component.loadMoreNotifications(i)&&l}return l},zn.b,zn.a)),l._30(40,573440,null,0,Qn.a,[[2,mn.a],m.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(n()(),l._55(-1,0,["\n    "])),(n()(),l._55(-1,1,["\n"])),(n()(),l._55(-1,null,["\n"]))],function(n,t){var i=t.component;n(t,7,0);n(t,20,0,i.notificationsLoaded);n(t,23,0,l._34(1,"",l._56(t,23,0,l._44(t,24).transform("core.pulltorefresh")),""));n(t,28,0,i.notificationsLoaded);n(t,31,0,i.canMarkAllNotificationsAsRead);n(t,34,0,i.notifications);n(t,37,0,!i.notifications||i.notifications.length<=0);n(t,40,0,i.canLoadMore,i.loadMoreError)},function(n,t){n(t,5,0,l._44(t,6)._hidden,l._44(t,6)._sbPadding);n(t,11,0,l._56(t,11,0,l._44(t,12).transform("addon.notifications.notifications")));n(t,16,0,l._44(t,17).statusbarPadding,l._44(t,17)._hasRefresher);n(t,19,0,"inactive"!==l._44(t,20).state,l._44(t,20)._top);n(t,22,0,l._44(t,23).r.state)})}Object.defineProperty(t,"__esModule",{value:!0});var l=i(0),o=i(5),e=i(3),a=i(26),u=i(32),c=i(106),r=i(7),s=i(62),f=i(1),d=this&&this.__decorate||function(n,t,i,l){var o,e=arguments.length,a=e<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,i,l);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(a=(e<3?o(a):e>3?o(t,i,a):o(t,i))||a);return e>3&&a&&Object.defineProperty(t,i,a),a},_=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},p=function(){function AddonNotificationsActionsComponent(n,t,i){this.contentLinksDelegate=n,this.sitesProvider=t,this.navCtrl=i,this.actions=[]}return AddonNotificationsActionsComponent.prototype.ngOnInit=function(){var n=this;if(this.contextUrl||this.data&&this.data.appurl){(this.data&&this.data.appurl?this.contentLinksDelegate.getActionsFor(this.data.appurl,this.courseId,void 0,this.data):Promise.resolve([])).then(function(t){return!t.length&&n.contextUrl?n.contentLinksDelegate.getActionsFor(n.contextUrl,n.courseId,void 0,n.data):t}).then(function(t){t.length||t.push({message:"core.view",icon:"eye",action:n.defaultAction.bind(n)}),n.actions=t})}},AddonNotificationsActionsComponent.prototype.defaultAction=function(n,t){var i=this.data&&this.data.appurl||this.contextUrl;this.sitesProvider.getCurrentSite().openInBrowserWithAutoLogin(i)},d([Object(l.D)(),_("design:type",String)],AddonNotificationsActionsComponent.prototype,"contextUrl",void 0),d([Object(l.D)(),_("design:type",Number)],AddonNotificationsActionsComponent.prototype,"courseId",void 0),d([Object(l.D)(),_("design:type",Object)],AddonNotificationsActionsComponent.prototype,"data",void 0),AddonNotificationsActionsComponent=d([Object(l.m)({selector:"addon-notifications-actions",templateUrl:"addon-notifications-actions.html"}),_("design:paramtypes",[s.a,f.a,o.s])],AddonNotificationsActionsComponent)}(),h=this&&this.__decorate||function(n,t,i,l){var o,e=arguments.length,a=e<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,i,l);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(a=(e<3?o(a):e>3?o(t,i,a):o(t,i))||a);return e>3&&a&&Object.defineProperty(t,i,a),a},g=function(){function AddonNotificationsComponentsModule(){}return AddonNotificationsComponentsModule=h([Object(l.I)({declarations:[p],imports:[r.b,o.k,e.b.forChild()],providers:[],exports:[p]})],AddonNotificationsComponentsModule)}(),m=i(4),A=i(11),b=i(9),N=i(2),v=i(256),P=i(519),L=i(144),y=this&&this.__decorate||function(n,t,i,l){var o,e=arguments.length,a=e<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,i,l);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(a=(e<3?o(a):e>3?o(t,i,a):o(t,i))||a);return e>3&&a&&Object.defineProperty(t,i,a),a},x=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},V=function(){function AddonNotificationsListPage(n,t,i,l,o,e,a,u,c){this.domUtils=t,this.eventsProvider=i,this.sitesProvider=l,this.textUtils=o,this.utils=e,this.notificationsProvider=a,this.pushNotificationsDelegate=u,this.notificationsHelper=c,this.notifications=[],this.notificationsLoaded=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.canMarkAllNotificationsAsRead=!1,this.loadingMarkAllNotificationsAsRead=!1,this.pendingRefresh=!1}return AddonNotificationsListPage.prototype.ionViewDidLoad=function(){var n=this;this.fetchNotifications(),this.cronObserver=this.eventsProvider.on(v.a.READ_CRON_EVENT,function(){n.isCurrentView&&(n.notificationsLoaded=!1,n.refreshNotifications())},this.sitesProvider.getCurrentSiteId()),this.pushObserver=this.pushNotificationsDelegate.on("receive").subscribe(function(t){n.isCurrentView&&n.utils.isTrueOrOne(t.notif)&&n.sitesProvider.isCurrentSite(t.site)?(n.notificationsLoaded=!1,n.refreshNotifications()):n.isCurrentView||(n.pendingRefresh=!0)})},AddonNotificationsListPage.prototype.fetchNotifications=function(n){var t=this;return this.loadMoreError=!1,this.notificationsHelper.getNotifications(n?[]:this.notifications).then(function(i){i.notifications.forEach(t.formatText.bind(t)),t.notifications=n?i.notifications:t.notifications.concat(i.notifications),t.canLoadMore=i.canLoadMore,t.markNotificationsAsRead(i.notifications)}).catch(function(n){t.domUtils.showErrorModalDefault(n,"addon.notifications.errorgetnotifications",!0),t.loadMoreError=!0}).finally(function(){t.notificationsLoaded=!0})},AddonNotificationsListPage.prototype.markAllNotificationsAsRead=function(){var n=this;this.loadingMarkAllNotificationsAsRead=!0,this.notificationsProvider.markAllNotificationsAsRead().catch(function(){}).then(function(){var t=n.sitesProvider.getCurrentSiteId();return n.eventsProvider.trigger(v.a.READ_CHANGED_EVENT,null,t),n.notificationsLoaded=!1,n.refreshNotifications()})},AddonNotificationsListPage.prototype.markNotificationsAsRead=function(n){var t,i=this;if(n.length>0){var l=n.map(function(n){return n.read?Promise.resolve():i.notificationsProvider.markNotificationRead(n.id)});t=Promise.all(l).catch(function(){}).finally(function(){i.notificationsProvider.invalidateNotificationsList().finally(function(){var n=i.sitesProvider.getCurrentSiteId();i.eventsProvider.trigger(v.a.READ_CHANGED_EVENT,null,n)})})}else t=Promise.resolve();t.finally(function(){if(i.notificationsProvider.isMarkAllNotificationsAsReadEnabled())return i.loadingMarkAllNotificationsAsRead=!0,i.notificationsProvider.getUnreadNotificationsCount().then(function(n){i.canMarkAllNotificationsAsRead=n>0}).finally(function(){i.loadingMarkAllNotificationsAsRead=!1});i.canMarkAllNotificationsAsRead=!1})},AddonNotificationsListPage.prototype.refreshNotifications=function(n){var t=this;return this.notificationsProvider.invalidateNotificationsList().finally(function(){return t.fetchNotifications(!0).finally(function(){n&&n.complete()})})},AddonNotificationsListPage.prototype.loadMoreNotifications=function(n){this.fetchNotifications().finally(function(){n&&n()})},AddonNotificationsListPage.prototype.formatText=function(n){var t=n.mobiletext.replace(/-{4,}/gi,"");n.mobiletext=this.textUtils.replaceNewLines(t,"<br>")},AddonNotificationsListPage.prototype.ionViewDidEnter=function(){this.isCurrentView=!0,this.pendingRefresh&&(this.pendingRefresh=!1,this.notificationsLoaded=!1,this.refreshNotifications())},AddonNotificationsListPage.prototype.ionViewDidLeave=function(){this.isCurrentView=!1},AddonNotificationsListPage.prototype.ngOnDestroy=function(){this.cronObserver&&this.cronObserver.off(),this.pushObserver&&this.pushObserver.unsubscribe()},AddonNotificationsListPage=y([Object(l.m)({selector:"page-addon-notifications-list",templateUrl:"list.html"}),x("design:paramtypes",[o.t,m.a,b.a,f.a,A.a,N.a,v.a,L.a,P.a])],AddonNotificationsListPage)}(),w=this&&this.__decorate||function(n,t,i,l){var o,e=arguments.length,a=e<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,i,l);else for(var u=n.length-1;u>=0;u--)(o=n[u])&&(a=(e<3?o(a):e>3?o(t,i,a):o(t,i))||a);return e>3&&a&&Object.defineProperty(t,i,a),a},k=function(){function AddonNotificationsListPageModule(){}return AddonNotificationsListPageModule=w([Object(l.I)({declarations:[V],imports:[a.a,u.a,c.a,o.l.forChild(V),e.b.forChild(),g]})],AddonNotificationsListPageModule)}(),R=i(1522),I=i(1523),C=i(1524),O=i(1525),j=i(1526),M=i(1527),D=i(1528),E=i(1529),$=i(1530),U=i(1531),T=i(1532),F=i(1533),H=i(1534),S=i(46),G=i(43),B=i(8),J=i(80),K=i(75),W=i(25),q=i(18),z=i(121),Q=i(101),X=i(214),Y=i(182),Z=i(20),nn=i(10),tn=i(28),ln=i(160),on=i(89),en=i(31),an=i(21),un=i(19),cn=i(27),rn=i(33),sn=i(248),fn=i(47),dn=i(16),_n=i(22),pn=i(6),hn=i(17),gn=i(15),mn=i(29),An=i(42),bn=i(40),Nn=i(30),vn=i(36),Pn=i(119),Ln=i(48),yn=i(120),xn=l._29({encapsulation:2,styles:[],data:{}}),Vn=(l._27("addon-notifications-actions",p,function View_AddonNotificationsActionsComponent_Host_0(n){return l._57(0,[(n()(),l._31(0,0,null,null,1,"addon-notifications-actions",[],null,null,null,View_AddonNotificationsActionsComponent_0,xn)),l._30(1,114688,null,0,p,[s.a,f.a,Z.a],null,null)],function(n,t){n(t,1,0)},null)},{contextUrl:"contextUrl",courseId:"courseId",data:"data"},{},[]),i(124)),wn=i(114),kn=i(377),Rn=i(24),In=i(1617),Cn=i(371),On=i(39),jn=i(723),Mn=i(212),Dn=i(35),En=i(473),$n=i(724),Un=i(314),Tn=i(247),Fn=i(181),Hn=i(34),Sn=i(107),Gn=i(159),Bn=i(44),Jn=i(213),Kn=i(173),Wn=i(54),qn=i(51),zn=i(373),Qn=i(273),Xn=i(69),Yn=l._29({encapsulation:2,styles:[],data:{}}),Zn=l._27("page-addon-notifications-list",V,function View_AddonNotificationsListPage_Host_0(n){return l._57(0,[(n()(),l._31(0,0,null,null,1,"page-addon-notifications-list",[],null,null,null,View_AddonNotificationsListPage_0,Yn)),l._30(1,180224,null,0,V,[Xn.a,m.a,b.a,f.a,A.a,N.a,v.a,L.a,P.a],null,null)],null,null)},{},{},[]),nt=i(23),tt=i(367),it=i(368),lt=i(370),ot=i(369),et=i(472),at=i(722),ut=i(270);i.d(t,"AddonNotificationsListPageModuleNgFactory",function(){return ct});var ct=l._28(k,[],function(n){return l._40([l._41(512,l.o,l._21,[[8,[R.a,I.a,C.a,O.a,j.a,M.a,D.a,E.a,$.a,U.a,T.a,F.a,H.a,Zn]],[3,l.o],l.K]),l._41(4608,r.m,r.l,[l.G,[2,r.w]]),l._41(4608,nt.x,nt.x,[]),l._41(4608,nt.d,nt.d,[]),l._41(4608,tt.b,tt.a,[]),l._41(4608,it.a,it.b,[]),l._41(4608,lt.b,lt.a,[]),l._41(4608,ot.b,ot.a,[]),l._41(4608,q.a,q.a,[et.a,tt.b,it.a,lt.b,ot.b,q.b,q.c]),l._41(512,r.b,r.b,[]),l._41(512,nt.v,nt.v,[]),l._41(512,nt.i,nt.i,[]),l._41(512,nt.s,nt.s,[]),l._41(512,at.a,at.a,[]),l._41(512,e.b,e.b,[]),l._41(512,u.a,u.a,[]),l._41(512,c.a,c.a,[]),l._41(512,a.a,a.a,[]),l._41(512,at.b,at.b,[]),l._41(512,g,g,[]),l._41(512,k,k,[]),l._41(256,q.c,void 0,[]),l._41(256,q.b,void 0,[]),l._41(256,ut.a,V,[])])})}});